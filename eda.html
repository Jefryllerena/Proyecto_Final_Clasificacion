

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Análisis Exploratorio (EDA) &#8212; jbook_Proyecto_Final_Clasificacion</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'eda';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clasificación Bayesiana" href="clasificacion_bayesiana.html" />
    <link rel="prev" title="&lt;no title&gt;" href="descripcion_del_proyecto.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="descripcion_del_proyecto.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/logo-uninorte.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/logo-uninorte.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="descripcion_del_proyecto.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Análisis Exploratorio (EDA)</a></li>




<li class="toctree-l1"><a class="reference internal" href="clasificacion_bayesiana.html">Clasificación Bayesiana</a></li>
















<li class="toctree-l1"><a class="reference internal" href="knn.html">k-Vecinos Más Cercanos</a></li>









<li class="toctree-l1"><a class="reference internal" href="regresion_logistica_l1_l2.html">Regresión Logística Ridge (L2) y Lasso (L1)</a></li>















<li class="toctree-l1"><a class="reference internal" href="arbol_de_decision.html">Árbol de Decisión</a></li>


















<li class="toctree-l1"><a class="reference internal" href="bosques_aleatorios.html">Bosques Aleatorios</a></li>
<li class="toctree-l1"><a class="reference internal" href="xgboost.html">XGBoost</a></li>
<li class="toctree-l1"><a class="reference internal" href="svm.html">Máquina de Soporte Vectorial</a></li>










<li class="toctree-l1"><a class="reference internal" href="mlp.html">Redes Neuronales Perceptrón Multicapa</a></li>








<li class="toctree-l1"><a class="reference internal" href="rnn.html">RNN Sobre Datos Estáticos</a></li>





<li class="toctree-l1"><a class="reference internal" href="lstm.html">Redes Neuronales Memoria Larga a Corto Plazo</a></li>























<li class="toctree-l1"><a class="reference internal" href="cnn.html">Red Neuronal Convolucional (CNN)</a></li>





<li class="toctree-l1"><a class="reference internal" href="autoencoders.html">LSTM Autoencoder para Detección de Anomalías en Crédito</a></li>





<li class="toctree-l1"><a class="reference internal" href="modelo_propuesto.html">Modelo Original Propuesto</a></li>





<li class="toctree-l1"><a class="reference internal" href="proyecto.html">PALABRAS CLAVE / KEY WORDS:</a></li>



</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Feda.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/eda.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Análisis Exploratorio (EDA)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Análisis Exploratorio (EDA)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#carga-de-datos-y-librerias"><strong>1. Carga de Datos y Librerías</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-librerias">1.1. Importar Librerías</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-datos-desde-archivos-csv">1.2. Cargar Datos desde Archivos CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agregacion-de-datos">1.3. Agregación de Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-consolidada">1.4. Guardar Base de Datos Consolidada</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento-de-datos"><strong>2. Preprocesamiento de Datos</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-consolidada">2.1. Cargar Base de Datos Consolidada</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identificacion-de-tipos-de-variables">2.2. Identificación de Tipos de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-caracteristicas">2.3. Selección de características</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-variable-id">2.3.1. Eliminar Variable ID</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-valores-nulos-de-la-variable-objetivo">2.3.2. Eliminar Valores Nulos de la Variable Objetivo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-columnas-con-mas-del-40-de-valores-nulos">2.3.3. Eliminar columnas con más del 40% de valores nulos.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-variables-con-una-sola-categoria-o-donde-una-categoria-domina-90">2.3.4. Eliminar variables con una sola categoría o donde una categoría domina &gt;90%.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alta-correlacion-con-otras-variables">2.3.5. Alta correlación con otras variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-muy-baja-frecuencia-de-una-clase-para-categoricas-o-dummies">2.3.6. Variables con muy baja frecuencia de una clase (para categóricas o dummies)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-nas">2.3.7. Eliminar NAs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-filtrada">2.4. Guardar Base de Datos Filtrada</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-exploratorio-de-datos-eda"><strong>3. Análisis Exploratorio de Datos (EDA)</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-filtrada">3.1. Cargar Base de Datos Filtrada</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glosario-de-variables">3.2. Glosario de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#renombramiento-de-variables">3.3. Renombramiento de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-descriptiva-de-variables-filtradas">3.4. Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-variables">3.5. Clasificación de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-y-transformaciones-variables-categoricas-object">3.6. Graficas y Transformaciones Variables Categóricas (Object)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-categoricas">3.6.1. Visualización de Variables Categóricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transformaciones-en-variables-categoricas">3.6.2. Transformaciones en Variables Categóricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-categoricas-modificadas">3.6.3. Visualización de Variables Categóricas Modificadas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.6.4 Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">3.6.5. Clasificación de Variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-y-transformaciones-de-variables-numericas-diferentes-a-dummies">3.7. Graficas y Transformaciones de Variables Numéricas Diferentes a Dummies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-numericas">3.7.1. Visualización de Variables Numéricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-valores-negativos">3.7.2. Eliminar valores negativos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#log-transformaciones-de-variables">3.7.3. Log-Transformaciones de Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#binarizar-variables">3.7.4. Binarizar Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#categorizar-variables">3.7.5. Categorizar Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-outliers">3.7.6. Eliminar Outliers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-numericas-modificadas">3.7.7. Visualización de Variables Numéricas Modificadas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">3.7.8. Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.7.9. Clasificación de Variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-de-variables-dummies">3.8. Gráficas de Variables Dummies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-descriptiva-de-variables-finales">3.9. Exploración Descriptiva de Variables Finales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-final">3.10. Guardar Base de Datos Final</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#estratificacion-aleatoria-de-la-base-de-datos">4.Estratificación aleatoria de la Base de datos</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-final">4.1. Cargar Base de Datos Final</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4.2. Exploración Descriptiva de Variables Finales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#separar-variables-de-acuerdo-a-su-clasificacion">4.3. Separar Variables de acuerdo a su Clasificación</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estratificacion-50">4.4. Estratificación 50%</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-the-end">4.5. Guardar Base de Datos The End</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analisis-exploratorio-eda">
<h1>Análisis Exploratorio (EDA)<a class="headerlink" href="#analisis-exploratorio-eda" title="Permalink to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">history</span> -n 1-1000
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   1: %history -n 1-1000
   2: %history -f C:\Users\DELL\Desktop\Aprendizaje_de_Maquina\jbook_Proyecto_Final_Clasificacion\Template_Jupyter_Book/historial_sesion.py
   3:
import warnings
import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib as mpl
import matplotlib.pyplot as plt
warnings.filterwarnings(&quot;ignore&quot;)
import matplotlib.colors as mcolors
from statsmodels.tools.tools import add_constant
from sklearn.preprocessing import StandardScaler
from sklearn.model_selection import train_test_split
from statsmodels.stats.outliers_influence import variance_inflation_factor
   4:
# Ruta local a la carpeta donde están los archivos en Google Colab
ruta = r&quot;C:\Users\DELL\Desktop\Aprendizaje_de_Maquina\Datos Originales&quot;

# Cargar archivos CSV
train  = pd.read_csv(f&#39;{ruta}/application_train.csv&#39;)
test   = pd.read_csv(f&#39;{ruta}/application_test.csv&#39;)
bureau = pd.read_csv(f&#39;{ruta}/bureau.csv&#39;)
bureau_balance = pd.read_csv(f&#39;{ruta}/bureau_balance.csv&#39;)
previous_app   = pd.read_csv(f&#39;{ruta}/previous_application.csv&#39;)
pos_cash       = pd.read_csv(f&#39;{ruta}/POS_CASH_balance.csv&#39;)
credit_card    = pd.read_csv(f&#39;{ruta}/credit_card_balance.csv&#39;)
insta_payments = pd.read_csv(f&#39;{ruta}/installments_payments.csv&#39;)
   5: %history -n 1-1000
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">history</span> -f C:\Users\DELL\Desktop\Aprendizaje_de_Maquina\jbook_Proyecto_Final_Clasificacion\Template_Jupyter_Book/historial_sesion.py
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="carga-de-datos-y-librerias">
<h1><strong>1. Carga de Datos y Librerías</strong><a class="headerlink" href="#carga-de-datos-y-librerias" title="Permalink to this heading">#</a></h1>
<section id="importar-librerias">
<h2>1.1. Importar Librerías<a class="headerlink" href="#importar-librerias" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">from</span> <span class="nn">statsmodels.tools.tools</span> <span class="kn">import</span> <span class="n">add_constant</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.outliers_influence</span> <span class="kn">import</span> <span class="n">variance_inflation_factor</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="cargar-datos-desde-archivos-csv">
<h2>1.2. Cargar Datos desde Archivos CSV<a class="headerlink" href="#cargar-datos-desde-archivos-csv" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ruta local a la carpeta donde están los archivos en Google Colab</span>
<span class="n">ruta</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\Users\DELL\Desktop\Aprendizaje_de_Maquina\home-credit-default-risk&quot;</span>

<span class="c1"># Cargar archivos CSV</span>
<span class="n">train</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/application_train.csv&#39;</span><span class="p">)</span>
<span class="n">test</span>   <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/application_test.csv&#39;</span><span class="p">)</span>
<span class="n">bureau</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/bureau.csv&#39;</span><span class="p">)</span>
<span class="n">bureau_balance</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/bureau_balance.csv&#39;</span><span class="p">)</span>
<span class="n">previous_app</span>   <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/previous_application.csv&#39;</span><span class="p">)</span>
<span class="n">pos_cash</span>       <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/POS_CASH_balance.csv&#39;</span><span class="p">)</span>
<span class="n">credit_card</span>    <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/credit_card_balance.csv&#39;</span><span class="p">)</span>
<span class="n">insta_payments</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ruta</span><span class="si">}</span><span class="s1">/installments_payments.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="agregacion-de-datos">
<h2>1.3. Agregación de Datos<a class="headerlink" href="#agregacion-de-datos" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ================================</span>
<span class="c1"># 1. bureau</span>
<span class="c1"># ================================</span>
<span class="n">bureau_agg</span> <span class="o">=</span> <span class="n">bureau</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;SK_ID_BUREAU&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;CREDIT_ACTIVE&quot;</span><span class="p">:</span> <span class="s2">&quot;nunique&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AMT_CREDIT_SUM&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">bureau_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="s2">&quot;bureau_count&quot;</span><span class="p">,</span> <span class="s2">&quot;credit_active_unique&quot;</span><span class="p">,</span> <span class="s2">&quot;total_credit_sum&quot;</span><span class="p">]</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">bureau_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">test</span>  <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">bureau_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="c1"># ================================</span>
<span class="c1"># 2. previous_application</span>
<span class="c1"># ================================</span>
<span class="n">previous_app_agg</span> <span class="o">=</span> <span class="n">previous_app</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;SK_ID_PREV&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AMT_APPLICATION&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AMT_CREDIT&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">previous_app_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="s2">&quot;prev_app_count&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_amt_app&quot;</span><span class="p">,</span> <span class="s2">&quot;total_amt_credit&quot;</span><span class="p">]</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">previous_app_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">test</span>  <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">previous_app_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="c1"># ================================</span>
<span class="c1"># 3. POS_CASH_balance</span>
<span class="c1"># ================================</span>
<span class="n">pos_cash_agg</span> <span class="o">=</span> <span class="n">pos_cash</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;SK_ID_PREV&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;MONTHS_BALANCE&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">pos_cash_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="s2">&quot;pos_cash_count&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_months_balance&quot;</span><span class="p">]</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pos_cash_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">test</span>  <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">pos_cash_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="c1"># ================================</span>
<span class="c1"># 4. credit_card_balance</span>
<span class="c1"># ================================</span>
<span class="n">credit_card_agg</span> <span class="o">=</span> <span class="n">credit_card</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;SK_ID_PREV&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AMT_BALANCE&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">credit_card_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="s2">&quot;credit_card_count&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_credit_balance&quot;</span><span class="p">]</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">credit_card_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">test</span>  <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">credit_card_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="c1"># ================================</span>
<span class="c1"># 5. installments_payments</span>
<span class="c1"># ================================</span>
<span class="n">insta_payments_agg</span> <span class="o">=</span> <span class="n">insta_payments</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span>
    <span class="s2">&quot;SK_ID_PREV&quot;</span><span class="p">:</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span>
    <span class="s2">&quot;AMT_PAYMENT&quot;</span><span class="p">:</span> <span class="s2">&quot;sum&quot;</span><span class="p">,</span>
    <span class="s2">&quot;DAYS_ENTRY_PAYMENT&quot;</span><span class="p">:</span> <span class="s2">&quot;mean&quot;</span>
<span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">insta_payments_agg</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="s2">&quot;installments_count&quot;</span><span class="p">,</span> <span class="s2">&quot;total_amt_payment&quot;</span><span class="p">,</span> <span class="s2">&quot;avg_days_entry_payment&quot;</span><span class="p">]</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">insta_payments_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
<span class="n">test</span>  <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">insta_payments_agg</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s2">&quot;SK_ID_CURR&quot;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

<span class="c1"># ================================</span>
<span class="c1"># 6. Combinar train y test</span>
<span class="c1"># ================================</span>
<span class="n">train</span><span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;train&quot;</span>
<span class="n">test</span><span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">test</span><span class="p">[</span><span class="s2">&quot;TARGET&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="p">[</span><span class="n">train</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>  <span class="c1"># Asegurar mismo orden de columnas</span>
<span class="n">full_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">train</span><span class="p">,</span> <span class="n">test</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Datos combinados correctamente. Dimensiones:&quot;</span><span class="p">,</span> <span class="n">full_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Datos combinados correctamente. Dimensiones: (356255, 136)
</pre></div>
</div>
</div>
</div>
</section>
<section id="guardar-base-de-datos-consolidada">
<h2>1.4. Guardar Base de Datos Consolidada<a class="headerlink" href="#guardar-base-de-datos-consolidada" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Guardar el dataset consolidado como CSV</span>
<span class="n">full_data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_consolidado.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Archivo guardado exitosamente como &#39;credit_risk_consolidado.csv&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Archivo guardado exitosamente como &#39;credit_risk_consolidado.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="preprocesamiento-de-datos">
<h1><strong>2. Preprocesamiento de Datos</strong><a class="headerlink" href="#preprocesamiento-de-datos" title="Permalink to this heading">#</a></h1>
<section id="cargar-base-de-datos-consolidada">
<h2>2.1. Cargar Base de Datos Consolidada<a class="headerlink" href="#cargar-base-de-datos-consolidada" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo consolidado desde la ruta</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_consolidado.csv&#39;</span><span class="p">)</span>

<span class="c1"># Verificar que se cargó correctamente</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dataset cargado correctamente. Dimensiones:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset cargado correctamente. Dimensiones: (356255, 136)
</pre></div>
</div>
</div>
</div>
</section>
<section id="identificacion-de-tipos-de-variables">
<h2>2.2. Identificación de Tipos de Variables<a class="headerlink" href="#identificacion-de-tipos-de-variables" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
        <span class="p">})</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Ejecutar la función sobre el DataFrame cargado</span>
<span class="n">info_table</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar la tabla con información descriptiva por columna</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>  <span class="c1"># Para mostrar todas las filas si hay muchas variables</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dimensiones:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">info_table</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones: (356255, 136)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SK_ID_CURR</td>
      <td>int64</td>
      <td>0</td>
      <td>0.00</td>
      <td>356255</td>
      <td>Más de 10 valores únicos</td>
    </tr>
    <tr>
      <th>1</th>
      <td>TARGET</td>
      <td>float64</td>
      <td>48744</td>
      <td>13.68</td>
      <td>2</td>
      <td>[1.0, 0.0, nan]</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NAME_CONTRACT_TYPE</td>
      <td>object</td>
      <td>0</td>
      <td>0.00</td>
      <td>2</td>
      <td>[Cash loans, Revolving loans]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>CODE_GENDER</td>
      <td>object</td>
      <td>0</td>
      <td>0.00</td>
      <td>3</td>
      <td>[M, F, XNA]</td>
    </tr>
    <tr>
      <th>4</th>
      <td>FLAG_OWN_CAR</td>
      <td>object</td>
      <td>0</td>
      <td>0.00</td>
      <td>2</td>
      <td>[N, Y]</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cambiar estilo global de la fuente a una más formal</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.family&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;serif&#39;</span>  <span class="c1"># Usa fuente tipo LaTeX</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.serif&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Computer Modern&#39;</span><span class="p">,</span> <span class="s1">&#39;DejaVu Serif&#39;</span><span class="p">,</span> <span class="s1">&#39;Times New Roman&#39;</span><span class="p">,</span> <span class="s1">&#39;STIX&#39;</span><span class="p">]</span>

<span class="c1"># También puedes controlar tamaño por defecto si quieres</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="seleccion-de-caracteristicas">
<h2>2.3. Selección de características<a class="headerlink" href="#seleccion-de-caracteristicas" title="Permalink to this heading">#</a></h2>
<section id="eliminar-variable-id">
<h3>2.3.1. Eliminar Variable ID<a class="headerlink" href="#eliminar-variable-id" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Eliminar la columna &#39;SK_ID_CURR&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;SK_ID_CURR&#39;</span><span class="p">])</span>

<span class="c1"># Verificar dimensiones después de eliminar</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&#39;SK_ID_CURR&#39; eliminada. Nueva dimensión:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;SK_ID_CURR&#39; eliminada. Nueva dimensión: (356255, 135)
</pre></div>
</div>
</div>
</div>
</section>
<section id="eliminar-valores-nulos-de-la-variable-objetivo">
<h3>2.3.2. Eliminar Valores Nulos de la Variable Objetivo<a class="headerlink" href="#eliminar-valores-nulos-de-la-variable-objetivo" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mostrar distribución original (con nulos)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Distribución original de la variable TARGET (incluye nulos):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Distribución porcentual original (incluye nulos):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># Eliminar nulos</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">])</span>

<span class="c1"># Convertir a entero</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># Mostrar distribución después de limpieza</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Distribución de TARGET después de eliminar nulos y convertir a entero:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Distribución porcentual después de limpieza:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

<span class="c1"># Mostrar dimensiones finales</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> Dimensiones del DataFrame final: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Distribución original de la variable TARGET (incluye nulos):
TARGET
0.0    282686
NaN     48744
1.0     24825
Name: count, dtype: int64

 Distribución porcentual original (incluye nulos):
TARGET
0.0    79.35
NaN    13.68
1.0     6.97
Name: proportion, dtype: float64

 Distribución de TARGET después de eliminar nulos y convertir a entero:
TARGET
0    282686
1     24825
Name: count, dtype: int64

 Distribución porcentual después de limpieza:
TARGET
0    91.93
1     8.07
Name: proportion, dtype: float64

 Dimensiones del DataFrame final: (307511, 135)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Eliminar filas donde &#39;TARGET&#39; es nulo</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">notnull</span><span class="p">()]</span>

<span class="c1"># Confirmar el cambio</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuevo tamaño del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Distribución de la variable TARGET:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Distribución porcentual:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Nuevo tamaño del DataFrame: (307511, 135)
Distribución de la variable TARGET:
TARGET
0    282686
1     24825
Name: count, dtype: int64

Distribución porcentual:
TARGET
0    91.93
1     8.07
Name: proportion, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="eliminar-columnas-con-mas-del-40-de-valores-nulos">
<h3>2.3.3. Eliminar columnas con más del 40% de valores nulos.<a class="headerlink" href="#eliminar-columnas-con-mas-del-40-de-valores-nulos" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrar casos donde TARGET == 1</span>
<span class="n">df_target_1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

<span class="c1"># Mostrar las dimensiones</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dimensiones del subconjunto con TARGET == 1:&quot;</span><span class="p">,</span> <span class="n">df_target_1</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del subconjunto con TARGET == 1: (24825, 135)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Preparar los datos</span>
<span class="n">na_counts</span> <span class="o">=</span> <span class="n">df_target_1</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">na_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">na_counts</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_target_1</span><span class="p">)</span>

<span class="n">na_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">na_pct</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="s1">&#39;nulos&#39;</span><span class="p">:</span> <span class="n">na_pct</span><span class="o">.</span><span class="n">values</span>
<span class="p">})</span>

<span class="n">na_df</span> <span class="o">=</span> <span class="n">na_df</span><span class="p">[</span><span class="n">na_df</span><span class="p">[</span><span class="s1">&#39;nulos&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Crear el gráfico</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="o">.</span><span class="n">from_list</span><span class="p">(</span><span class="s2">&quot;vino_pastel&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;#feb6e6&quot;</span><span class="p">,</span> <span class="s2">&quot;#800020&quot;</span><span class="p">])</span>
<span class="n">norm</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">Normalize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">nul</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">na_df</span><span class="p">[</span><span class="s1">&#39;columna&#39;</span><span class="p">],</span> <span class="n">na_df</span><span class="p">[</span><span class="s1">&#39;nulos&#39;</span><span class="p">],</span> <span class="n">na_df</span><span class="p">[</span><span class="s1">&#39;nulos&#39;</span><span class="p">])):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">cmap</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="n">val</span><span class="p">)),</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">val</span><span class="si">:</span><span class="s1">.1f</span><span class="si">}</span><span class="s1">%&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">na_df</span><span class="p">)))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">na_df</span><span class="p">[</span><span class="s1">&#39;columna&#39;</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Porcentaje de Nulos&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Variables con más del 20</span><span class="si">% d</span><span class="s2">e valores nulos&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4c51b5f712b0bbaeb5f8af1f382d3b4580ee381e304ff2ce6f45ecfe0884bb49.png" src="_images/4c51b5f712b0bbaeb5f8af1f382d3b4580ee381e304ff2ce6f45ecfe0884bb49.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Filtrar columnas con más del 40% de nulos</span>
<span class="n">columnas_nulos_40</span> <span class="o">=</span> <span class="n">na_pct</span><span class="p">[</span><span class="n">na_pct</span> <span class="o">&gt;</span> <span class="mi">40</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Eliminar esas columnas del DataFrame completo df</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columnas_nulos_40</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># 3. Confirmar resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Columnas eliminadas por tener más del 40% de nulos (en TARGET==1): </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">columnas_nulos_40</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones actualizadas de df: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Columnas eliminadas por tener más del 40% de nulos (en TARGET==1): 51
Dimensiones actualizadas de df: (307511, 84)
</pre></div>
</div>
</div>
</div>
</section>
<section id="eliminar-variables-con-una-sola-categoria-o-donde-una-categoria-domina-90">
<h3>2.3.4. Eliminar variables con una sola categoría o donde una categoría domina &gt;90%.<a class="headerlink" href="#eliminar-variables-con-una-sola-categoria-o-donde-una-categoria-domina-90" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Paso 1: Identificar columnas con una categoría dominante &gt;90% (excluyendo NA)</span>
<span class="n">umbral</span> <span class="o">=</span> <span class="mf">0.90</span>
<span class="n">columnas_dominantes</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">valores</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valores</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">columnas_dominantes</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">elif</span> <span class="n">valores</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">umbral</span><span class="p">:</span>
        <span class="n">columnas_dominantes</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">valores</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Convertir a DataFrame ordenado</span>
<span class="n">dom_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">columnas_dominantes</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>
    <span class="s1">&#39;proporcion&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">columnas_dominantes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="p">})</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;proporcion&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Paso 2: Graficar con color fijo</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="n">color_fijo</span> <span class="o">=</span> <span class="s2">&quot;#9B4F5F&quot;</span>  <span class="c1"># Color sólido vino oscuro</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">dom_df</span><span class="p">[</span><span class="s1">&#39;columna&#39;</span><span class="p">],</span> <span class="n">dom_df</span><span class="p">[</span><span class="s1">&#39;proporcion&#39;</span><span class="p">])):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color_fijo</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">val</span> <span class="o">+</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">val</span><span class="si">:</span><span class="s1">.1%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Estética del gráfico</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dom_df</span><span class="p">)))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">dom_df</span><span class="p">[</span><span class="s1">&#39;columna&#39;</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Proporción de la categoría más frecuente&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Variables con una sola categoría o categoría dominante &gt;90%&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/685a7ea95599194215ed204d0daf1262e19e3f86e348ffc5e4a578d92644b89e.png" src="_images/685a7ea95599194215ed204d0daf1262e19e3f86e348ffc5e4a578d92644b89e.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Inicializar lista para guardar columnas a eliminar</span>
<span class="n">columnas_dominantes</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Iterar sobre las columnas del DataFrame</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="c1"># Excluir NaNs y contar frecuencia de valores</span>
    <span class="n">valores</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># Revisar condiciones:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valores</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">columnas_dominantes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>  <span class="c1"># Solo una categoría (sin contar NaNs)</span>
    <span class="k">elif</span> <span class="n">valores</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.999</span><span class="p">:</span>
        <span class="n">columnas_dominantes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>  <span class="c1"># Una categoría domina más del 99.9%</span>

<span class="c1"># Mostrar resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Columnas a eliminar por tener una sola categoría dominante (&gt;99%): </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">columnas_dominantes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">columnas_dominantes</span><span class="p">)</span>

<span class="c1"># Eliminar del DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columnas_dominantes</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuevas dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Columnas a eliminar por tener una sola categoría dominante (&gt;99%): 11
[&#39;FLAG_MOBIL&#39;, &#39;FLAG_DOCUMENT_2&#39;, &#39;FLAG_DOCUMENT_4&#39;, &#39;FLAG_DOCUMENT_7&#39;, &#39;FLAG_DOCUMENT_10&#39;, &#39;FLAG_DOCUMENT_12&#39;, &#39;FLAG_DOCUMENT_17&#39;, &#39;FLAG_DOCUMENT_19&#39;, &#39;FLAG_DOCUMENT_20&#39;, &#39;FLAG_DOCUMENT_21&#39;, &#39;dataset&#39;]
Nuevas dimensiones del DataFrame: (307511, 73)
</pre></div>
</div>
</div>
</div>
</section>
<section id="alta-correlacion-con-otras-variables">
<h3>2.3.5. Alta correlación con otras variables<a class="headerlink" href="#alta-correlacion-con-otras-variables" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Seleccionar solo columnas numéricas</span>
<span class="n">df_numericas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;int64&#39;</span><span class="p">])</span>

<span class="c1"># 2. Calcular la matriz de correlación</span>
<span class="n">matriz_correlacion</span> <span class="o">=</span> <span class="n">df_numericas</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="c1"># 3. Definir paleta personalizada estilo vino pastel</span>
<span class="n">cmap_vino_pastel</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">([</span><span class="s2">&quot;#F8E8EC&quot;</span><span class="p">,</span> <span class="s2">&quot;#C08081&quot;</span><span class="p">,</span> <span class="s2">&quot;#800020&quot;</span><span class="p">],</span> <span class="n">as_cmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># 4. Visualizar con heatmap</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span>
    <span class="n">matriz_correlacion</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="n">cmap_vino_pastel</span><span class="p">,</span>
    <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>          <span class="c1"># True si quieres ver los valores</span>
    <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span>
    <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shrink&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">}</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Matriz de Correlación entre Variables Numéricas&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/cae3fafec95761f0e3063610d156b07e1ead694536d8c8180e466a731ef6b13c.png" src="_images/cae3fafec95761f0e3063610d156b07e1ead694536d8c8180e466a731ef6b13c.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Seleccionar solo variables numéricas (sin nulos)</span>
<span class="n">df_numericas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;int64&#39;</span><span class="p">,</span> <span class="s1">&#39;float64&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># 2. Agregar constante para intercepto (requerido por VIF)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">add_constant</span><span class="p">(</span><span class="n">df_numericas</span><span class="p">)</span>

<span class="c1"># 3. Calcular VIF para cada variable</span>
<span class="n">vif_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
<span class="n">vif_df</span><span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">columns</span>
<span class="n">vif_df</span><span class="p">[</span><span class="s2">&quot;VIF&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">variance_inflation_factor</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>

<span class="c1"># 4. Ordenar por VIF descendente</span>
<span class="n">vif_df</span> <span class="o">=</span> <span class="n">vif_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;VIF&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 5. Mostrar</span>
<span class="nb">print</span><span class="p">(</span><span class="n">vif_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                       Variable           VIF
0                         const  18677.595654
11               FLAG_EMP_PHONE   2485.373140
8                 DAYS_EMPLOYED   2465.928426
30     OBS_60_CNT_SOCIAL_CIRCLE    345.347579
28     OBS_30_CNT_SOCIAL_CIRCLE    344.817406
5               AMT_GOODS_PRICE     41.513172
3                    AMT_CREDIT     40.817717
17         REGION_RATING_CLIENT     11.016437
18  REGION_RATING_CLIENT_W_CITY     10.873466
21   REG_REGION_NOT_WORK_REGION      9.319682
24       REG_CITY_NOT_WORK_CITY      7.703256
22  LIVE_REGION_NOT_WORK_REGION      7.676728
60       avg_days_entry_payment      6.795705
57           avg_months_balance      6.730270
25      LIVE_CITY_NOT_WORK_CITY      6.235131
1                  CNT_CHILDREN      4.848335
16              CNT_FAM_MEMBERS      4.719836
55             total_amt_credit      4.387030
29     DEF_30_CNT_SOCIAL_CIRCLE      4.073873
53               prev_app_count      4.019722
31     DEF_60_CNT_SOCIAL_CIRCLE      3.869866
33              FLAG_DOCUMENT_3      2.917104
59            total_amt_payment      2.851151
4                   AMT_ANNUITY      2.777689
56               pos_cash_count      2.520532
54                  avg_amt_app      2.503609
35              FLAG_DOCUMENT_6      2.461033
23       REG_CITY_NOT_LIVE_CITY      2.423774
20   REG_REGION_NOT_LIVE_REGION      2.360393
58           installments_count      2.299075
7                    DAYS_BIRTH      2.194661
36              FLAG_DOCUMENT_8      1.955049
49   AMT_REQ_CREDIT_BUREAU_YEAR      1.639212
50                 bureau_count      1.545788
6    REGION_POPULATION_RELATIVE      1.408811
51         credit_active_unique      1.331067
32       DAYS_LAST_PHONE_CHANGE      1.259054
12              FLAG_WORK_PHONE      1.240348
52             total_credit_sum      1.202146
26                 EXT_SOURCE_2      1.189119
34              FLAG_DOCUMENT_5      1.182795
27                 EXT_SOURCE_3      1.182182
9             DAYS_REGISTRATION      1.160496
14                   FLAG_PHONE      1.158867
10              DAYS_ID_PUBLISH      1.143674
19      HOUR_APPR_PROCESS_START      1.112816
45    AMT_REQ_CREDIT_BUREAU_DAY      1.107806
44   AMT_REQ_CREDIT_BUREAU_HOUR      1.065515
2              AMT_INCOME_TOTAL      1.047994
37              FLAG_DOCUMENT_9      1.047669
46   AMT_REQ_CREDIT_BUREAU_WEEK      1.046095
48    AMT_REQ_CREDIT_BUREAU_QRT      1.041104
47    AMT_REQ_CREDIT_BUREAU_MON      1.039553
15                   FLAG_EMAIL      1.036678
38             FLAG_DOCUMENT_11      1.029616
42             FLAG_DOCUMENT_16      1.010452
39             FLAG_DOCUMENT_13      1.007159
43             FLAG_DOCUMENT_18      1.006660
40             FLAG_DOCUMENT_14      1.003581
41             FLAG_DOCUMENT_15      1.002263
13             FLAG_CONT_MOBILE      1.001407
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 6. Identificar variables con VIF mayor a 10</span>
<span class="n">variables_a_eliminar</span> <span class="o">=</span> <span class="n">vif_df</span><span class="p">[</span><span class="n">vif_df</span><span class="p">[</span><span class="s2">&quot;VIF&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">][</span><span class="s2">&quot;Variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 7. Eliminar &#39;const&#39; si está incluida (no es una variable del dataset original)</span>
<span class="n">variables_a_eliminar</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">variables_a_eliminar</span> <span class="k">if</span> <span class="n">var</span> <span class="o">!=</span> <span class="s2">&quot;const&quot;</span><span class="p">]</span>

<span class="c1"># 8. Eliminar esas variables del DataFrame original</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">variables_a_eliminar</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="c1"># 9. Mostrar resultado</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables eliminadas por VIF &gt; 10: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">variables_a_eliminar</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">variables_a_eliminar</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuevas dimensiones del df: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># df[df_numericas.columns] = df_numericas  # Si deseas mantenerlo en df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variables eliminadas por VIF &gt; 10: 8
[&#39;FLAG_EMP_PHONE&#39;, &#39;DAYS_EMPLOYED&#39;, &#39;OBS_60_CNT_SOCIAL_CIRCLE&#39;, &#39;OBS_30_CNT_SOCIAL_CIRCLE&#39;, &#39;AMT_GOODS_PRICE&#39;, &#39;AMT_CREDIT&#39;, &#39;REGION_RATING_CLIENT&#39;, &#39;REGION_RATING_CLIENT_W_CITY&#39;]
Nuevas dimensiones del df: (307511, 65)
</pre></div>
</div>
</div>
</div>
</section>
<section id="variables-con-muy-baja-frecuencia-de-una-clase-para-categoricas-o-dummies">
<h3>2.3.6. Variables con muy baja frecuencia de una clase (para categóricas o dummies)<a class="headerlink" href="#variables-con-muy-baja-frecuencia-de-una-clase-para-categoricas-o-dummies" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Seleccionar columnas binarias</span>
<span class="n">dummies_binarias</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">==</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">df_binarias</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">dummies_binarias</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># 2. Convertir &#39;Sí&#39;/&#39;No&#39; a 0/1 si es necesario</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_binarias</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">df_binarias</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="nb">object</span><span class="p">:</span>
        <span class="n">df_binarias</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_binarias</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="s1">&#39;No&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;Sí&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="c1"># 3. Calcular proporciones</span>
<span class="n">proporciones</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
    <span class="s1">&#39;0&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">df_binarias</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">df_binarias</span><span class="o">.</span><span class="n">notna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span>
    <span class="s1">&#39;1&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">df_binarias</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">df_binarias</span><span class="o">.</span><span class="n">notna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">})</span>

<span class="c1"># 4. Ordenar (opcional)</span>
<span class="n">proporciones</span> <span class="o">=</span> <span class="n">proporciones</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># 5. Ajustar altura dinámicamente</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proporciones</span><span class="p">)</span>
<span class="n">altura_figura</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">n</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span>  <span class="c1"># altura base + 0.4 por variable</span>

<span class="c1"># 6. Graficar</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">altura_figura</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">proporciones</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">proporciones</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#F8E8EC&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">proporciones</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">proporciones</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">],</span> <span class="n">left</span><span class="o">=</span><span class="n">proporciones</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#9B4F5F&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proporción&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de 0 y 1 en Variables Dummies&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/569bb604d7bc0d513021c638eee5eebb35b8a7684b5800e15158b4d0fbf4035a.png" src="_images/569bb604d7bc0d513021c638eee5eebb35b8a7684b5800e15158b4d0fbf4035a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. Eliminar columnas desbalanceadas (&lt;5% en una de las clases)</span>
<span class="n">columnas_desequilibradas</span> <span class="o">=</span> <span class="n">proporciones</span><span class="p">[(</span><span class="n">proporciones</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">proporciones</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Se eliminaron </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">columnas_desequilibradas</span><span class="p">)</span><span class="si">}</span><span class="s2"> columnas por desbalance (&lt;1%):</span><span class="se">\n</span><span class="si">{</span><span class="n">columnas_desequilibradas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 5. Eliminar del DataFrame original</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columnas_desequilibradas</span><span class="p">)</span>

<span class="c1"># 6. Recalcular proporciones para las dummies restantes</span>
<span class="n">proporciones_filtradas</span> <span class="o">=</span> <span class="n">proporciones</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">columnas_desequilibradas</span><span class="p">)</span>

<span class="c1"># 7. Ajustar altura dinámicamente</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">proporciones_filtradas</span><span class="p">)</span>
<span class="n">altura_figura</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">n</span> <span class="o">*</span> <span class="mf">0.4</span><span class="p">)</span>

<span class="c1"># 8. Graficar</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">altura_figura</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">proporciones_filtradas</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">proporciones_filtradas</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#F8E8EC&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">proporciones_filtradas</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">proporciones_filtradas</span><span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">],</span> <span class="n">left</span><span class="o">=</span><span class="n">proporciones_filtradas</span><span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#9B4F5F&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Proporción&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de 0 y 1 en Variables Dummies (filtradas)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Se eliminaron 11 columnas por desbalance (&lt;1%):
[&#39;FLAG_CONT_MOBILE&#39;, &#39;LIVE_REGION_NOT_WORK_REGION&#39;, &#39;REG_REGION_NOT_LIVE_REGION&#39;, &#39;FLAG_DOCUMENT_5&#39;, &#39;FLAG_DOCUMENT_16&#39;, &#39;FLAG_DOCUMENT_18&#39;, &#39;FLAG_DOCUMENT_11&#39;, &#39;FLAG_DOCUMENT_9&#39;, &#39;FLAG_DOCUMENT_13&#39;, &#39;FLAG_DOCUMENT_14&#39;, &#39;FLAG_DOCUMENT_15&#39;]
</pre></div>
</div>
<img alt="_images/c7fae879679cfbc0063ba2891d567a21df3d4db1d4879b3ab382cd3be3cc2dab.png" src="_images/c7fae879679cfbc0063ba2891d567a21df3d4db1d4879b3ab382cd3be3cc2dab.png" />
</div>
</div>
</section>
<section id="eliminar-nas">
<h3>2.3.7. Eliminar NAs<a class="headerlink" href="#eliminar-nas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Proporción de 0 y 1 en la variable TARGET antes de eliminar NAs</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Proporción de TARGET antes de eliminar NAs:&quot;</span><span class="p">)</span>
<span class="n">proporcion_target</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proporcion_target</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 2. Mostrar variables que tienen NAs</span>
<span class="n">na_counts</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">na_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">na_counts</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="c1"># Filtrar solo las columnas que tienen al menos un NA</span>
<span class="n">na_info</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;NA count&#39;</span><span class="p">:</span> <span class="n">na_counts</span><span class="p">,</span> <span class="s1">&#39;NA (%)&#39;</span><span class="p">:</span> <span class="n">na_pct</span><span class="p">})</span>
<span class="n">na_info</span> <span class="o">=</span> <span class="n">na_info</span><span class="p">[</span><span class="n">na_info</span><span class="p">[</span><span class="s1">&#39;NA count&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Variables con NAs:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_info</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;NA (%)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. Eliminar las filas que tengan NAs en cualquier columna</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># 4. Proporción de 0 y 1 en la variable TARGET después de eliminar NAs</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Proporción de TARGET después de eliminar NAs:&quot;</span><span class="p">)</span>
<span class="n">proporcion_target_clean</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;TARGET&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">proporcion_target_clean</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Proporción de TARGET antes de eliminar NAs:
TARGET
0    0.919271
1    0.080729
Name: proportion, dtype: float64


Variables con NAs:
                            NA count     NA (%)
OCCUPATION_TYPE                96391  31.345545
EXT_SOURCE_3                   60965  19.825307
credit_active_unique           44020  14.314935
total_credit_sum               44020  14.314935
bureau_count                   44020  14.314935
AMT_REQ_CREDIT_BUREAU_QRT      41519  13.501631
AMT_REQ_CREDIT_BUREAU_HOUR     41519  13.501631
AMT_REQ_CREDIT_BUREAU_DAY      41519  13.501631
AMT_REQ_CREDIT_BUREAU_WEEK     41519  13.501631
AMT_REQ_CREDIT_BUREAU_MON      41519  13.501631
AMT_REQ_CREDIT_BUREAU_YEAR     41519  13.501631
avg_months_balance             18067   5.875237
pos_cash_count                 18067   5.875237
total_amt_credit               16454   5.350703
avg_amt_app                    16454   5.350703
prev_app_count                 16454   5.350703
avg_days_entry_payment         15876   5.162742
installments_count             15868   5.160141
total_amt_payment              15868   5.160141
NAME_TYPE_SUITE                 1292   0.420148
DEF_60_CNT_SOCIAL_CIRCLE        1021   0.332021
DEF_30_CNT_SOCIAL_CIRCLE        1021   0.332021
EXT_SOURCE_2                     660   0.214626
AMT_ANNUITY                       12   0.003902
CNT_FAM_MEMBERS                    2   0.000650
DAYS_LAST_PHONE_CHANGE             1   0.000325


Proporción de TARGET después de eliminar NAs:
TARGET
0    0.914562
1    0.085438
Name: proportion, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="guardar-base-de-datos-filtrada">
<h2>2.4. Guardar Base de Datos Filtrada<a class="headerlink" href="#guardar-base-de-datos-filtrada" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Guardar el dataset consolidado como CSV</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_filtrada.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Archivo guardado exitosamente como &#39;credit_risk_filtrada.csv&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Archivo guardado exitosamente como &#39;credit_risk_filtrada.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="analisis-exploratorio-de-datos-eda">
<h1><strong>3. Análisis Exploratorio de Datos (EDA)</strong><a class="headerlink" href="#analisis-exploratorio-de-datos-eda" title="Permalink to this heading">#</a></h1>
<section id="cargar-base-de-datos-filtrada">
<h2>3.1. Cargar Base de Datos Filtrada<a class="headerlink" href="#cargar-base-de-datos-filtrada" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo consolidado desde la ruta</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_filtrada.csv&#39;</span><span class="p">)</span>

<span class="c1"># Verificar que se cargó correctamente</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dataset cargado correctamente. Dimensiones:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset cargado correctamente. Dimensiones: (157026, 54)
</pre></div>
</div>
</div>
</div>
</section>
<section id="glosario-de-variables">
<h2>3.2. Glosario de Variables<a class="headerlink" href="#glosario-de-variables" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>TARGET</strong>: Variable objetivo (1 = cliente con dificultad de pago, 0 = sin dificultad).</p></li>
<li><p><strong>NAME_CONTRACT_TYPE</strong>: Tipo de contrato del préstamo (efectivo o rotativo).</p></li>
<li><p><strong>CODE_GENDER</strong>: Género del cliente.</p></li>
<li><p><strong>FLAG_OWN_CAR</strong>: Indicador de si el cliente posee un automóvil.</p></li>
<li><p><strong>FLAG_OWN_REALTY</strong>: Indicador de si el cliente posee una casa o departamento.</p></li>
<li><p><strong>CNT_CHILDREN</strong>: Número de hijos reportados por el cliente.</p></li>
<li><p><strong>AMT_INCOME_TOTAL</strong>: Ingreso total declarado por el cliente.</p></li>
<li><p><strong>AMT_CREDIT</strong>: Monto total del crédito solicitado.</p></li>
<li><p><strong>NAME_TYPE_SUITE</strong>: Acompañantes del cliente al momento de la solicitud del crédito.</p></li>
<li><p><strong>NAME_INCOME_TYPE</strong>: Tipo de ingreso del cliente (asalariado, pensionado, etc.).</p></li>
<li><p><strong>NAME_EDUCATION_TYPE</strong>: Nivel educativo alcanzado por el cliente.</p></li>
<li><p><strong>NAME_FAMILY_STATUS</strong>: Estado civil del cliente.</p></li>
<li><p><strong>NAME_HOUSING_TYPE</strong>: Tipo de vivienda donde reside el cliente.</p></li>
<li><p><strong>REGION_POPULATION_RELATIVE</strong>: Población relativa de la región donde vive el cliente.</p></li>
<li><p><strong>DAYS_BIRTH</strong>: Edad del cliente en días (número negativo desde el día actual).</p></li>
<li><p><strong>DAYS_EMPLOYED</strong>: Días desde el último empleo.</p></li>
<li><p><strong>DAYS_REGISTRATION</strong>: Días desde que se registró el documento de identidad.</p></li>
<li><p><strong>DAYS_ID_PUBLISH</strong>: Días desde que se actualizó por última vez el documento.</p></li>
<li><p><strong>FLAG_WORK_PHONE</strong>: Indicador de si el cliente tiene teléfono del trabajo.</p></li>
<li><p><strong>FLAG_PHONE</strong>: Indicador de si el cliente tiene teléfono personal.</p></li>
<li><p><strong>FLAG_EMAIL</strong>: Indicador de si el cliente tiene correo electrónico.</p></li>
<li><p><strong>OCCUPATION_TYPE</strong>: Profesión u ocupación del cliente.</p></li>
<li><p><strong>REGION_RATING_CLIENT</strong>: Calificación de la región de residencia del cliente.</p></li>
<li><p><strong>WEEKDAY_APPR_PROCESS_START</strong>: Día de la semana en que se inició la solicitud.</p></li>
<li><p><strong>HOUR_APPR_PROCESS_START</strong>: Hora del día en que se inició la solicitud.</p></li>
<li><p><strong>REG_REGION_NOT_LIVE_REGION</strong>: Vive fuera de la región donde se registró.</p></li>
<li><p><strong>REG_REGION_NOT_WORK_REGION</strong>: Trabaja fuera de la región donde se registró.</p></li>
<li><p><strong>REG_CITY_NOT_LIVE_CITY</strong>: Vive fuera de la ciudad donde se registró.</p></li>
<li><p><strong>REG_CITY_NOT_WORK_CITY</strong>: Trabaja fuera de la ciudad donde se registró.</p></li>
<li><p><strong>ORGANIZATION_TYPE</strong>: Tipo de organización empleadora del cliente.</p></li>
<li><p><strong>EXT_SOURCE_2</strong>: Score de riesgo proveniente de fuente externa 2.</p></li>
<li><p><strong>EXT_SOURCE_3</strong>: Score de riesgo proveniente de fuente externa 3.</p></li>
<li><p><strong>OBS_30_CNT_SOCIAL_CIRCLE</strong>: Observaciones en círculo social (últimos 30 días).</p></li>
<li><p><strong>DEF_30_CNT_SOCIAL_CIRCLE</strong>: Incumplimientos en círculo social (últimos 30 días).</p></li>
<li><p><strong>DAYS_LAST_PHONE_CHANGE</strong>: Días desde el último cambio de número telefónico.</p></li>
<li><p><strong>FLAG_DOCUMENT_3, 5, 6, 8</strong>: Documentos entregados (número correspondiente).</p></li>
<li><p><strong>AMT_REQ_CREDIT_BUREAU_*:</strong> Cantidad de consultas al buró de crédito en diferentes períodos (hora, día, semana, mes, trimestre, año).</p></li>
<li><p><strong>bureau_count</strong>: Número de entradas del cliente en buró de crédito.</p></li>
<li><p><strong>credit_active_unique</strong>: Número de tipos únicos de crédito activos.</p></li>
<li><p><strong>total_credit_sum</strong>: Suma total del crédito otorgado en el buró.</p></li>
<li><p><strong>prev_app_count</strong>: Número de solicitudes anteriores de crédito.</p></li>
<li><p><strong>avg_amt_app</strong>: Monto promedio de solicitudes previas.</p></li>
<li><p><strong>total_amt_credit</strong>: Monto total de crédito otorgado en el pasado.</p></li>
<li><p><strong>pos_cash_count</strong>: Número de cuentas POS/CASH anteriores.</p></li>
<li><p><strong>avg_months_balance</strong>: Promedio de meses en balance de cuentas POS.</p></li>
<li><p><strong>installments_count</strong>: Número total de cuotas o pagos.</p></li>
<li><p><strong>total_amt_payment</strong>: Suma total de pagos realizados.</p></li>
<li><p><strong>‘CNT_FAM_MEMBERS’</strong>: ‘numero_miembros_familia’</p></li>
<li><p><strong>‘LIVE_CITY_NOT_WORK_CITY</strong>’: ‘ciudad_residencia_distinta_trabajo’,</p></li>
<li><p><strong>‘DEF_60_CNT_SOCIAL_CIRCLE’</strong>: ‘default_60_dias_circulo_social’,</p></li>
<li><p><strong>‘avg_days_entry_payment’</strong>: ‘promedio_dias_entre_registro_y_pago’</p></li>
</ul>
</section>
<section id="renombramiento-de-variables">
<h2>3.3. Renombramiento de Variables<a class="headerlink" href="#renombramiento-de-variables" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s1">&#39;TARGET&#39;</span><span class="p">:</span> <span class="s1">&#39;incumplimiento_credito&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_CONTRACT_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;tipo_contrato&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CODE_GENDER&#39;</span><span class="p">:</span> <span class="s1">&#39;genero&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_OWN_CAR&#39;</span><span class="p">:</span> <span class="s1">&#39;posee_auto&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_OWN_REALTY&#39;</span><span class="p">:</span> <span class="s1">&#39;posee_vivienda&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CNT_CHILDREN&#39;</span><span class="p">:</span> <span class="s1">&#39;numero_hijos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_INCOME_TOTAL&#39;</span><span class="p">:</span> <span class="s1">&#39;ingreso_total&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_CREDIT&#39;</span><span class="p">:</span> <span class="s1">&#39;monto_credito&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_ANNUITY&#39;</span><span class="p">:</span> <span class="s1">&#39;cuota_periodica&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_TYPE_SUITE&#39;</span><span class="p">:</span> <span class="s1">&#39;acompanantes_solicitud&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_INCOME_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;tipo_ingreso&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_EDUCATION_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;nivel_educativo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_FAMILY_STATUS&#39;</span><span class="p">:</span> <span class="s1">&#39;estado_civil&#39;</span><span class="p">,</span>
    <span class="s1">&#39;NAME_HOUSING_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;tipo_vivienda&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REGION_POPULATION_RELATIVE&#39;</span><span class="p">:</span> <span class="s1">&#39;poblacion_relativa_region&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DAYS_BIRTH&#39;</span><span class="p">:</span> <span class="s1">&#39;dias_desde_nacimiento&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DAYS_EMPLOYED&#39;</span><span class="p">:</span> <span class="s1">&#39;dias_empleado&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DAYS_REGISTRATION&#39;</span><span class="p">:</span> <span class="s1">&#39;dias_desde_registro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DAYS_ID_PUBLISH&#39;</span><span class="p">:</span> <span class="s1">&#39;dias_desde_emision_id&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_WORK_PHONE&#39;</span><span class="p">:</span> <span class="s1">&#39;telefono_trabajo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_PHONE&#39;</span><span class="p">:</span> <span class="s1">&#39;telefono_personal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_EMAIL&#39;</span><span class="p">:</span> <span class="s1">&#39;tiene_email&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OCCUPATION_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;ocupacion&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REGION_RATING_CLIENT&#39;</span><span class="p">:</span> <span class="s1">&#39;calificacion_region_cliente&#39;</span><span class="p">,</span>
    <span class="s1">&#39;WEEKDAY_APPR_PROCESS_START&#39;</span><span class="p">:</span> <span class="s1">&#39;dia_solicitud&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HOUR_APPR_PROCESS_START&#39;</span><span class="p">:</span> <span class="s1">&#39;hora_solicitud&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REG_REGION_NOT_LIVE_REGION&#39;</span><span class="p">:</span> <span class="s1">&#39;vive_fuera_region_registrada&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REG_REGION_NOT_WORK_REGION&#39;</span><span class="p">:</span> <span class="s1">&#39;trabaja_fuera_region_registrada&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REG_CITY_NOT_LIVE_CITY&#39;</span><span class="p">:</span> <span class="s1">&#39;vive_fuera_ciudad_registrada&#39;</span><span class="p">,</span>
    <span class="s1">&#39;REG_CITY_NOT_WORK_CITY&#39;</span><span class="p">:</span> <span class="s1">&#39;trabaja_fuera_ciudad_registrada&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ORGANIZATION_TYPE&#39;</span><span class="p">:</span> <span class="s1">&#39;tipo_organizacion&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EXT_SOURCE_2&#39;</span><span class="p">:</span> <span class="s1">&#39;fuente_externa_2&#39;</span><span class="p">,</span>
    <span class="s1">&#39;EXT_SOURCE_3&#39;</span><span class="p">:</span> <span class="s1">&#39;fuente_externa_3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;OBS_30_CNT_SOCIAL_CIRCLE&#39;</span><span class="p">:</span> <span class="s1">&#39;obs_sociales_30_dias&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DEF_30_CNT_SOCIAL_CIRCLE&#39;</span><span class="p">:</span> <span class="s1">&#39;incumplimientos_30_dias&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DAYS_LAST_PHONE_CHANGE&#39;</span><span class="p">:</span> <span class="s1">&#39;dias_ultimo_cambio_telefono&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_DOCUMENT_3&#39;</span><span class="p">:</span> <span class="s1">&#39;documento_3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_DOCUMENT_5&#39;</span><span class="p">:</span> <span class="s1">&#39;documento_5&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_DOCUMENT_6&#39;</span><span class="p">:</span> <span class="s1">&#39;documento_6&#39;</span><span class="p">,</span>
    <span class="s1">&#39;FLAG_DOCUMENT_8&#39;</span><span class="p">:</span> <span class="s1">&#39;documento_8&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_HOUR&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_hora&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_DAY&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_dia&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_WEEK&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_semana&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_MON&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_mes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_QRT&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_trimestre&#39;</span><span class="p">,</span>
    <span class="s1">&#39;AMT_REQ_CREDIT_BUREAU_YEAR&#39;</span><span class="p">:</span> <span class="s1">&#39;consultas_buro_anio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;bureau_count&#39;</span><span class="p">:</span> <span class="s1">&#39;entradas_buro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;credit_active_unique&#39;</span><span class="p">:</span> <span class="s1">&#39;tipos_credito_activo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;total_credit_sum&#39;</span><span class="p">:</span> <span class="s1">&#39;suma_total_credito&#39;</span><span class="p">,</span>
    <span class="s1">&#39;prev_app_count&#39;</span><span class="p">:</span> <span class="s1">&#39;cantidad_solicitudes_previas&#39;</span><span class="p">,</span>
    <span class="s1">&#39;avg_amt_app&#39;</span><span class="p">:</span> <span class="s1">&#39;monto_promedio_solicitudes&#39;</span><span class="p">,</span>
    <span class="s1">&#39;total_amt_credit&#39;</span><span class="p">:</span> <span class="s1">&#39;monto_total_credito&#39;</span><span class="p">,</span>
    <span class="s1">&#39;pos_cash_count&#39;</span><span class="p">:</span> <span class="s1">&#39;cuentas_pos_cash&#39;</span><span class="p">,</span>
    <span class="s1">&#39;avg_months_balance&#39;</span><span class="p">:</span> <span class="s1">&#39;promedio_meses_saldo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;installments_count&#39;</span><span class="p">:</span> <span class="s1">&#39;total_cuotas&#39;</span><span class="p">,</span>
    <span class="s1">&#39;total_amt_payment&#39;</span><span class="p">:</span> <span class="s1">&#39;total_pagado&#39;</span><span class="p">,</span>
    <span class="s1">&#39;CNT_FAM_MEMBERS&#39;</span><span class="p">:</span> <span class="s1">&#39;numero_miembros_familia&#39;</span><span class="p">,</span>
    <span class="s1">&#39;LIVE_CITY_NOT_WORK_CITY&#39;</span><span class="p">:</span> <span class="s1">&#39;ciudad_residencia_distinta_trabajo&#39;</span><span class="p">,</span>
    <span class="s1">&#39;DEF_60_CNT_SOCIAL_CIRCLE&#39;</span><span class="p">:</span> <span class="s1">&#39;default_60_dias_circulo_social&#39;</span><span class="p">,</span>
    <span class="s1">&#39;avg_days_entry_payment&#39;</span><span class="p">:</span> <span class="s1">&#39;promedio_dias_entre_registro_y_pago&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exploracion-descriptiva-de-variables-filtradas">
<h2>3.4. Exploración Descriptiva de Variables Filtradas<a class="headerlink" href="#exploracion-descriptiva-de-variables-filtradas" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Agregar estadísticas solo si es numérica</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">std</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
            <span class="n">minimo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">maximo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mediana</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">std</span> <span class="o">=</span> <span class="n">minimo</span> <span class="o">=</span> <span class="n">maximo</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">mediana</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
            <span class="s1">&#39;moda&#39;</span><span class="p">:</span> <span class="n">moda</span><span class="p">,</span>
            <span class="s1">&#39;moda (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">moda_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_pct</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;desv. estándar&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">std</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;mínimo&#39;</span><span class="p">:</span> <span class="n">minimo</span><span class="p">,</span>
            <span class="s1">&#39;Q1&#39;</span><span class="p">:</span> <span class="n">q1</span><span class="p">,</span>
            <span class="s1">&#39;mediana&#39;</span><span class="p">:</span> <span class="n">mediana</span><span class="p">,</span>
            <span class="s1">&#39;Q3&#39;</span><span class="p">:</span> <span class="n">q3</span><span class="p">,</span>
            <span class="s1">&#39;máximo&#39;</span><span class="p">:</span> <span class="n">maximo</span>
        <span class="p">})</span>

    <span class="c1"># Imprimir resumen general</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> filas x </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> columnas&quot;</span><span class="p">)</span>
    <span class="n">num_con_nulos</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables con al menos un valor nulo: </span><span class="si">{</span><span class="n">num_con_nulos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos (#)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Aplicar función y guardar resultado</span>
<span class="n">tabla_variables</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">tabla_variables</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del DataFrame: 157,026 filas x 54 columnas
Variables con al menos un valor nulo: 0
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
      <th>moda</th>
      <th>moda (%)</th>
      <th>media</th>
      <th>desv. estándar</th>
      <th>mínimo</th>
      <th>Q1</th>
      <th>mediana</th>
      <th>Q3</th>
      <th>máximo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>incumplimiento_credito</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>91.46</td>
      <td>0.09</td>
      <td>0.28</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>consultas_buro_mes</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>22</td>
      <td>Más de 10 valores únicos</td>
      <td>0.0</td>
      <td>82.22</td>
      <td>0.29</td>
      <td>0.96</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>24.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fuente_externa_2</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>86642</td>
      <td>Más de 10 valores únicos</td>
      <td>0.285898</td>
      <td>0.25</td>
      <td>0.52</td>
      <td>0.19</td>
      <td>0.000005</td>
      <td>0.403370</td>
      <td>0.569466</td>
      <td>0.663778</td>
      <td>0.855000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>fuente_externa_3</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>794</td>
      <td>Más de 10 valores únicos</td>
      <td>0.7463</td>
      <td>0.52</td>
      <td>0.50</td>
      <td>0.20</td>
      <td>0.000527</td>
      <td>0.357293</td>
      <td>0.520898</td>
      <td>0.657784</td>
      <td>0.885488</td>
    </tr>
    <tr>
      <th>4</th>
      <td>incumplimientos_30_dias</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>9</td>
      <td>[2.0, 0.0, 1.0, 3.0, 5.0, 4.0, 34.0, 6.0, 8.0]</td>
      <td>0.0</td>
      <td>88.57</td>
      <td>0.14</td>
      <td>0.45</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>34.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="clasificacion-de-variables">
<h2>3.5. Clasificación de Variables<a class="headerlink" href="#clasificacion-de-variables" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Variables categóricas (object):</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Dummies (int64 con solo 2 categorías):</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 3. Variables numéricas que no son dummies (int64 con más de 2 valores únicos o float64):</span>
<span class="n">numericas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">|</span> <span class="p">(</span>
        <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;float64&#39;</span>
    <span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Categóricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">categoricas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">categoricas</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dummies (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">dummies</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Numéricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">numericas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">numericas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Categóricas (12): [&#39;tipo_contrato&#39;, &#39;genero&#39;, &#39;posee_auto&#39;, &#39;posee_vivienda&#39;, &#39;acompanantes_solicitud&#39;, &#39;tipo_ingreso&#39;, &#39;nivel_educativo&#39;, &#39;estado_civil&#39;, &#39;tipo_vivienda&#39;, &#39;ocupacion&#39;, &#39;dia_solicitud&#39;, &#39;tipo_organizacion&#39;]
Dummies (11): [&#39;incumplimiento_credito&#39;, &#39;documento_3&#39;, &#39;documento_6&#39;, &#39;documento_8&#39;, &#39;ciudad_residencia_distinta_trabajo&#39;, &#39;trabaja_fuera_ciudad_registrada&#39;, &#39;vive_fuera_ciudad_registrada&#39;, &#39;telefono_trabajo&#39;, &#39;telefono_personal&#39;, &#39;tiene_email&#39;, &#39;trabaja_fuera_region_registrada&#39;]
Numéricas (31): [&#39;consultas_buro_mes&#39;, &#39;fuente_externa_2&#39;, &#39;fuente_externa_3&#39;, &#39;incumplimientos_30_dias&#39;, &#39;default_60_dias_circulo_social&#39;, &#39;dias_ultimo_cambio_telefono&#39;, &#39;consultas_buro_hora&#39;, &#39;consultas_buro_dia&#39;, &#39;consultas_buro_semana&#39;, &#39;consultas_buro_trimestre&#39;, &#39;consultas_buro_anio&#39;, &#39;entradas_buro&#39;, &#39;tipos_credito_activo&#39;, &#39;suma_total_credito&#39;, &#39;cantidad_solicitudes_previas&#39;, &#39;monto_promedio_solicitudes&#39;, &#39;monto_total_credito&#39;, &#39;cuentas_pos_cash&#39;, &#39;promedio_meses_saldo&#39;, &#39;total_cuotas&#39;, &#39;total_pagado&#39;, &#39;numero_hijos&#39;, &#39;ingreso_total&#39;, &#39;cuota_periodica&#39;, &#39;poblacion_relativa_region&#39;, &#39;dias_desde_nacimiento&#39;, &#39;dias_desde_registro&#39;, &#39;dias_desde_emision_id&#39;, &#39;numero_miembros_familia&#39;, &#39;hora_solicitud&#39;, &#39;promedio_dias_entre_registro_y_pago&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="graficas-y-transformaciones-variables-categoricas-object">
<h2>3.6. Graficas y Transformaciones Variables Categóricas (Object)<a class="headerlink" href="#graficas-y-transformaciones-variables-categoricas-object" title="Permalink to this heading">#</a></h2>
<section id="visualizacion-de-variables-categoricas">
<h3>3.6.1. Visualización de Variables Categóricas<a class="headerlink" href="#visualizacion-de-variables-categoricas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Seleccionar variables categóricas (object)</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Generar gráfico de barras para cada variable categórica</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">categoricas</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">valores</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">valores</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">valores</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#d89ca1&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frecuencia de </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>

        <span class="c1"># Mostrar valores sobre las barras</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">valores</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">valores</span><span class="p">)</span><span class="o">*</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/29fb310e9f97c1f630e610a9e2c78469b4a975ea8bbbefe5dbd9da09a160c550.png" src="_images/29fb310e9f97c1f630e610a9e2c78469b4a975ea8bbbefe5dbd9da09a160c550.png" />
<img alt="_images/bc6d84abafb7d62f9ff2a8751d5074ac007ab0b53b63a7ba31703e7cd8c1888c.png" src="_images/bc6d84abafb7d62f9ff2a8751d5074ac007ab0b53b63a7ba31703e7cd8c1888c.png" />
<img alt="_images/b12d0373d13717e60972352bcc3870eb330f10e9742499734977e4ab5a8726eb.png" src="_images/b12d0373d13717e60972352bcc3870eb330f10e9742499734977e4ab5a8726eb.png" />
<img alt="_images/fb9e49172f6514ba2cf1d8fdeccdd55cc5136b79178d90a8482d4c9e7be699a8.png" src="_images/fb9e49172f6514ba2cf1d8fdeccdd55cc5136b79178d90a8482d4c9e7be699a8.png" />
<img alt="_images/758a3c247e237e4f11fbd04c8244ea165ce4a0de1ef3392170890a1a6da6734e.png" src="_images/758a3c247e237e4f11fbd04c8244ea165ce4a0de1ef3392170890a1a6da6734e.png" />
<img alt="_images/5872c1cd3397679a32d6c764dd745f38eb40157409671bc584e8dc87ebcc4a98.png" src="_images/5872c1cd3397679a32d6c764dd745f38eb40157409671bc584e8dc87ebcc4a98.png" />
<img alt="_images/9f46e9745454a68d3d7627a44f2c5d5fadebbff18b924dc6e837a31f39449513.png" src="_images/9f46e9745454a68d3d7627a44f2c5d5fadebbff18b924dc6e837a31f39449513.png" />
<img alt="_images/96d845bc67613252940651a68ab239b876222e9841aec8753e56d17a65331ad9.png" src="_images/96d845bc67613252940651a68ab239b876222e9841aec8753e56d17a65331ad9.png" />
<img alt="_images/08c9abad81d87e76277ecfdcbc0d7dc3150f2420ec37b7fbf05473443d8fb9ce.png" src="_images/08c9abad81d87e76277ecfdcbc0d7dc3150f2420ec37b7fbf05473443d8fb9ce.png" />
<img alt="_images/794ed5bcea1274a4cfd8b4dd9d7da463d6a51d6cf3272527b490ec009f1981c7.png" src="_images/794ed5bcea1274a4cfd8b4dd9d7da463d6a51d6cf3272527b490ec009f1981c7.png" />
<img alt="_images/6567c0f3f762fb6e824a63ed14b8843716ed06b8371d1d1b506c18c94c1072dd.png" src="_images/6567c0f3f762fb6e824a63ed14b8843716ed06b8371d1d1b506c18c94c1072dd.png" />
</div>
</div>
</section>
<section id="transformaciones-en-variables-categoricas">
<h3>3.6.2. Transformaciones en Variables Categóricas<a class="headerlink" href="#transformaciones-en-variables-categoricas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. tipo_contrato → Dummy con la categoría más frecuente como 1</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_contrato&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_contrato&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_contrato&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 2. genero → Eliminar &#39;XNA&#39; y dummy para la más frecuente</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;genero&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;XNA&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;genero&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;genero&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;genero&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 3. posee_auto → Dummy con la más frecuente como 1</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_auto&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_auto&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_auto&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 4. posee_vivienda → Dummy con la más frecuente como 1</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_vivienda&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_vivienda&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;posee_vivienda&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># 5. acompanantes_solicitud → Agrupar en &quot;Other&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;acompanantes_solicitud&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;acompanantes_solicitud&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s1">&#39;Spouse, partner&#39;</span><span class="p">:</span> <span class="s1">&#39;Family&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Children&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Other_B&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Other_A&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Group of people&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span>
<span class="p">})</span>

<span class="c1"># 6. tipo_ingreso → Agrupar en &quot;Other&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_ingreso&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_ingreso&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s1">&#39;Unemployed&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;State servant&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Student&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Businessman&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Pensioner&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Maternity leave&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span>
<span class="p">})</span>

<span class="c1"># 7. nivel_educativo → Agrupar en &quot;Other&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;nivel_educativo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;nivel_educativo&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s1">&#39;Incomplete higher&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Lower secondary&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Academic degree&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span>
<span class="p">})</span>

<span class="c1"># 8. estado_civil → Eliminar categoría &quot;Unknown&quot;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;estado_civil&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;Unknown&#39;</span><span class="p">]</span>

<span class="c1"># 9. ocupacion → Agrupar en &quot;Other&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;ocupacion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;ocupacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s1">&#39;Cooking staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Cleaning staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Private service staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Low-skill Laborers&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Secretaries&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Waiters/barmen staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Security staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Realty agents&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;HR staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span><span class="p">,</span>
    <span class="s1">&#39;IT staff&#39;</span><span class="p">:</span> <span class="s1">&#39;Other&#39;</span>
<span class="p">})</span>

<span class="c1"># 10. tipo_vivienda → Agrupar en &quot;Other apartment&quot;</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_vivienda&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_vivienda&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">({</span>
    <span class="s1">&#39;Municipal apartment&#39;</span><span class="p">:</span> <span class="s1">&#39;Other apartment&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Rented apartment&#39;</span><span class="p">:</span> <span class="s1">&#39;Other apartment&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Office apartment&#39;</span><span class="p">:</span> <span class="s1">&#39;Other apartment&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Co-op apartment&#39;</span><span class="p">:</span> <span class="s1">&#39;Other apartment&#39;</span>

<span class="p">})</span>

<span class="n">mapeo_organizacion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Sector Privado Formal</span>
    <span class="s1">&#39;Business Entity Type 1&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Business Entity Type 2&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Business Entity Type 3&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Self-employed&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Construction&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Hotel&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Restaurant&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Bank&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Telecom&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Electricity&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Postal&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Advertising&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Realtor&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Legal Services&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Mobile&#39;</span><span class="p">:</span> <span class="s1">&#39;Privado formal&#39;</span><span class="p">,</span>

    <span class="c1"># Sector Público / Gobierno</span>
    <span class="s1">&#39;Government&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;School&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Kindergarten&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;University&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Police&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Military&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Security Ministries&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Emergency&#39;</span><span class="p">:</span> <span class="s1">&#39;Sector público&#39;</span><span class="p">,</span>

    <span class="c1"># Salud y Educación (si quieres separar)</span>
    <span class="s1">&#39;Medicine&#39;</span><span class="p">:</span> <span class="s1">&#39;Salud y educación&#39;</span><span class="p">,</span>

    <span class="c1"># Agricultura, Industria y Comercio</span>
    <span class="s1">&#39;Agriculture&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Housing&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 1&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 2&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 3&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 4&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 5&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 6&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 7&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 8&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 9&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 10&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 11&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 12&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Industry: type 13&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 1&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 2&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 3&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 4&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 5&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 6&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Trade: type 7&#39;</span><span class="p">:</span> <span class="s1">&#39;Agro-industria-comercio&#39;</span><span class="p">,</span>

    <span class="c1"># Servicios</span>
    <span class="s1">&#39;Services&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Cleaning&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Insurance&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Culture&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Security&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Religion&#39;</span><span class="p">:</span> <span class="s1">&#39;Servicios personales&#39;</span><span class="p">,</span>

    <span class="c1"># Otros</span>
    <span class="s1">&#39;Other&#39;</span><span class="p">:</span> <span class="s1">&#39;Otro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Transport: type 1&#39;</span><span class="p">:</span> <span class="s1">&#39;Otro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Transport: type 2&#39;</span><span class="p">:</span> <span class="s1">&#39;Otro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Transport: type 3&#39;</span><span class="p">:</span> <span class="s1">&#39;Otro&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Transport: type 4&#39;</span><span class="p">:</span> <span class="s1">&#39;Otro&#39;</span>
<span class="p">}</span>

<span class="c1"># Aplicar al DataFrame</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_organizacion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;tipo_organizacion&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">mapeo_organizacion</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Transformaciones aplicadas directamente en df.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Transformaciones aplicadas directamente en df.
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualizacion-de-variables-categoricas-modificadas">
<h3>3.6.3. Visualización de Variables Categóricas Modificadas<a class="headerlink" href="#visualizacion-de-variables-categoricas-modificadas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Seleccionar variables categóricas (object)</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Generar gráfico de barras para cada variable categórica</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">categoricas</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">30</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">valores</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">valores</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">valores</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#d89ca1&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Frecuencia de </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>

        <span class="c1"># Mostrar valores sobre las barras</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">valores</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="o">+</span> <span class="nb">max</span><span class="p">(</span><span class="n">valores</span><span class="p">)</span><span class="o">*</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f161e7e1e32fefc4c29afda22425bad87034d4b2b67a81b0fc87d7740b063333.png" src="_images/f161e7e1e32fefc4c29afda22425bad87034d4b2b67a81b0fc87d7740b063333.png" />
<img alt="_images/82a18b97f0c676df19e4312591f63e7b6ad6e1440e1ca9737327d574aed16950.png" src="_images/82a18b97f0c676df19e4312591f63e7b6ad6e1440e1ca9737327d574aed16950.png" />
<img alt="_images/c775a620bf77a556a0541d875ce6cdb1d1c0b374022b583712779449fe886a4f.png" src="_images/c775a620bf77a556a0541d875ce6cdb1d1c0b374022b583712779449fe886a4f.png" />
<img alt="_images/67744f0483f3c51ff9e5dedcfff9e5e8a34cdd9bc8e0a618b80101802167efc3.png" src="_images/67744f0483f3c51ff9e5dedcfff9e5e8a34cdd9bc8e0a618b80101802167efc3.png" />
<img alt="_images/cb8cca99873657743b57e5ee68c264fbac5febfb6bd5dd4fb3a95e0a88112973.png" src="_images/cb8cca99873657743b57e5ee68c264fbac5febfb6bd5dd4fb3a95e0a88112973.png" />
<img alt="_images/7a5fd0c0f9e604ad140e718a3a747dc25a47f594c69cc55cd429b794687b07d2.png" src="_images/7a5fd0c0f9e604ad140e718a3a747dc25a47f594c69cc55cd429b794687b07d2.png" />
<img alt="_images/f0e5cb4c5c4b83af22925a3ae36962511885dbe38a3a9f830aa4aae4900d84ca.png" src="_images/f0e5cb4c5c4b83af22925a3ae36962511885dbe38a3a9f830aa4aae4900d84ca.png" />
<img alt="_images/20c3652dea0800b73a32ad2af545ff326a96df4b0052a21067b570069a93ab43.png" src="_images/20c3652dea0800b73a32ad2af545ff326a96df4b0052a21067b570069a93ab43.png" />
</div>
</div>
</section>
<section id="id1">
<h3>3.6.4 Exploración Descriptiva de Variables Filtradas<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Agregar estadísticas solo si es numérica</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">std</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
            <span class="n">minimo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">maximo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mediana</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">std</span> <span class="o">=</span> <span class="n">minimo</span> <span class="o">=</span> <span class="n">maximo</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">mediana</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
            <span class="s1">&#39;moda&#39;</span><span class="p">:</span> <span class="n">moda</span><span class="p">,</span>
            <span class="s1">&#39;moda (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">moda_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_pct</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;desv. estándar&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">std</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;mínimo&#39;</span><span class="p">:</span> <span class="n">minimo</span><span class="p">,</span>
            <span class="s1">&#39;Q1&#39;</span><span class="p">:</span> <span class="n">q1</span><span class="p">,</span>
            <span class="s1">&#39;mediana&#39;</span><span class="p">:</span> <span class="n">mediana</span><span class="p">,</span>
            <span class="s1">&#39;Q3&#39;</span><span class="p">:</span> <span class="n">q3</span><span class="p">,</span>
            <span class="s1">&#39;máximo&#39;</span><span class="p">:</span> <span class="n">maximo</span>
        <span class="p">})</span>

    <span class="c1"># Imprimir resumen general</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> filas x </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> columnas&quot;</span><span class="p">)</span>
    <span class="n">num_con_nulos</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables con al menos un valor nulo: </span><span class="si">{</span><span class="n">num_con_nulos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos (#)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Aplicar función y guardar resultado</span>
<span class="n">tabla_variables</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">tabla_variables</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del DataFrame: 157,024 filas x 54 columnas
Variables con al menos un valor nulo: 0
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
      <th>moda</th>
      <th>moda (%)</th>
      <th>media</th>
      <th>desv. estándar</th>
      <th>mínimo</th>
      <th>Q1</th>
      <th>mediana</th>
      <th>Q3</th>
      <th>máximo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>incumplimiento_credito</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>91.46</td>
      <td>0.09</td>
      <td>0.28</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>consultas_buro_mes</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>22</td>
      <td>Más de 10 valores únicos</td>
      <td>0.0</td>
      <td>82.22</td>
      <td>0.29</td>
      <td>0.96</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>24.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fuente_externa_2</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>86641</td>
      <td>Más de 10 valores únicos</td>
      <td>0.285898</td>
      <td>0.25</td>
      <td>0.52</td>
      <td>0.19</td>
      <td>0.000005</td>
      <td>0.403367</td>
      <td>0.569466</td>
      <td>0.663778</td>
      <td>0.855000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>fuente_externa_3</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>794</td>
      <td>Más de 10 valores únicos</td>
      <td>0.7463</td>
      <td>0.52</td>
      <td>0.50</td>
      <td>0.20</td>
      <td>0.000527</td>
      <td>0.357293</td>
      <td>0.520898</td>
      <td>0.657784</td>
      <td>0.885488</td>
    </tr>
    <tr>
      <th>4</th>
      <td>incumplimientos_30_dias</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>9</td>
      <td>[2.0, 0.0, 1.0, 3.0, 5.0, 4.0, 34.0, 6.0, 8.0]</td>
      <td>0.0</td>
      <td>88.57</td>
      <td>0.14</td>
      <td>0.45</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>34.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id2">
<h3>3.6.5. Clasificación de Variables<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clasificación de variables para el df transformado</span>

<span class="c1"># 1. Variables categóricas (tipo object)</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Dummies: tipo int64 con solo 2 valores únicos</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 3. Variables numéricas reales (más de 2 valores únicos o tipo float64)</span>
<span class="n">numericas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">|</span> <span class="p">(</span>
        <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;float64&#39;</span>
    <span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Mostrar resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables categóricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">categoricas</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">categoricas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables dummies (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">dummies</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables numéricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">numericas</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">numericas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Mostrar shape final</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shape del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variables categóricas (8): [&#39;acompanantes_solicitud&#39;, &#39;tipo_ingreso&#39;, &#39;nivel_educativo&#39;, &#39;estado_civil&#39;, &#39;tipo_vivienda&#39;, &#39;ocupacion&#39;, &#39;dia_solicitud&#39;, &#39;tipo_organizacion&#39;]
Variables dummies (11): [&#39;incumplimiento_credito&#39;, &#39;documento_3&#39;, &#39;documento_6&#39;, &#39;documento_8&#39;, &#39;ciudad_residencia_distinta_trabajo&#39;, &#39;trabaja_fuera_ciudad_registrada&#39;, &#39;vive_fuera_ciudad_registrada&#39;, &#39;telefono_trabajo&#39;, &#39;telefono_personal&#39;, &#39;tiene_email&#39;, &#39;trabaja_fuera_region_registrada&#39;]
Variables numéricas (31): [&#39;consultas_buro_mes&#39;, &#39;fuente_externa_2&#39;, &#39;fuente_externa_3&#39;, &#39;incumplimientos_30_dias&#39;, &#39;default_60_dias_circulo_social&#39;, &#39;dias_ultimo_cambio_telefono&#39;, &#39;consultas_buro_hora&#39;, &#39;consultas_buro_dia&#39;, &#39;consultas_buro_semana&#39;, &#39;consultas_buro_trimestre&#39;, &#39;consultas_buro_anio&#39;, &#39;entradas_buro&#39;, &#39;tipos_credito_activo&#39;, &#39;suma_total_credito&#39;, &#39;cantidad_solicitudes_previas&#39;, &#39;monto_promedio_solicitudes&#39;, &#39;monto_total_credito&#39;, &#39;cuentas_pos_cash&#39;, &#39;promedio_meses_saldo&#39;, &#39;total_cuotas&#39;, &#39;total_pagado&#39;, &#39;numero_hijos&#39;, &#39;ingreso_total&#39;, &#39;cuota_periodica&#39;, &#39;poblacion_relativa_region&#39;, &#39;dias_desde_nacimiento&#39;, &#39;dias_desde_registro&#39;, &#39;dias_desde_emision_id&#39;, &#39;numero_miembros_familia&#39;, &#39;hora_solicitud&#39;, &#39;promedio_dias_entre_registro_y_pago&#39;]
Shape del DataFrame: (157024, 54)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="graficas-y-transformaciones-de-variables-numericas-diferentes-a-dummies">
<h2>3.7. Graficas y Transformaciones de Variables Numéricas Diferentes a Dummies<a class="headerlink" href="#graficas-y-transformaciones-de-variables-numericas-diferentes-a-dummies" title="Permalink to this heading">#</a></h2>
<section id="visualizacion-de-variables-numericas">
<h3>3.7.1. Visualización de Variables Numéricas<a class="headerlink" href="#visualizacion-de-variables-numericas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Estilo gráfico</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="c1"># Recorrer cada variable numérica</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">numericas</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="c1"># Calcular IQR</span>
        <span class="n">Q1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
        <span class="n">Q3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>
        <span class="n">limite_inferior</span> <span class="o">=</span> <span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>
        <span class="n">limite_superior</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>

        <span class="c1"># Contar outliers</span>
        <span class="n">outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">limite_inferior</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">limite_superior</span><span class="p">)]</span>
        <span class="n">num_outliers</span> <span class="o">=</span> <span class="n">outliers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># Crear figura</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width_ratios&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>

        <span class="c1"># Histograma</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#9B4F5F&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Histograma de &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>

        <span class="c1"># Boxplot</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#b6e2b6&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Boxplot de &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>

        <span class="c1"># Mostrar conteo de outliers en consola</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">num_outliers</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> outliers detectados (fuera de [</span><span class="si">{</span><span class="n">limite_inferior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">limite_superior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">])&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_mes&#39;: 27,921 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/eef5ef177c1b937c304bab1a69be622272e47d57c9f54758a3b796c5939c0cd3.png" src="_images/eef5ef177c1b937c304bab1a69be622272e47d57c9f54758a3b796c5939c0cd3.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;fuente_externa_2&#39;: 745 outliers detectados (fuera de [0.01, 1.05])
</pre></div>
</div>
<img alt="_images/d3ee8e8f338a833a42d6e8d20dc050b9b3325dc3b35fedeb304ebe6864a3c889.png" src="_images/d3ee8e8f338a833a42d6e8d20dc050b9b3325dc3b35fedeb304ebe6864a3c889.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;fuente_externa_3&#39;: 0 outliers detectados (fuera de [-0.09, 1.11])
</pre></div>
</div>
<img alt="_images/d4874a4a144154fe467f60474d490b48cf2a689158ec9a45ffc8ced6d983400a.png" src="_images/d4874a4a144154fe467f60474d490b48cf2a689158ec9a45ffc8ced6d983400a.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;incumplimientos_30_dias&#39;: 17,940 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/600383d517f5b1dffce7359c50c74bd725f3511432c8f637ce2d532ca3ef4e26.png" src="_images/600383d517f5b1dffce7359c50c74bd725f3511432c8f637ce2d532ca3ef4e26.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;default_60_dias_circulo_social&#39;: 13,089 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/e4109c899e27d0ed2c9622e026311a6f03e1646631939a6e523150bdf07f457f.png" src="_images/e4109c899e27d0ed2c9622e026311a6f03e1646631939a6e523150bdf07f457f.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;dias_ultimo_cambio_telefono&#39;: 103 outliers detectados (fuera de [-3589.50, 1574.50])
</pre></div>
</div>
<img alt="_images/5fbd6350f903bbdd8bab54665697c42aa4d0b5e622dbd6b7c39fad3ed100a094.png" src="_images/5fbd6350f903bbdd8bab54665697c42aa4d0b5e622dbd6b7c39fad3ed100a094.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_hora&#39;: 969 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/a28626d637a7c9770547dba5c5869895cf1a9d38e2e2e353af54a9a693674706.png" src="_images/a28626d637a7c9770547dba5c5869895cf1a9d38e2e2e353af54a9a693674706.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_dia&#39;: 820 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/a68bfa529764fe0186d2b33f176a8ad4c8b9f71f61f54f4b7ff3b355d86ed326.png" src="_images/a68bfa529764fe0186d2b33f176a8ad4c8b9f71f61f54f4b7ff3b355d86ed326.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_semana&#39;: 5,230 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/34470da59992b4c00b4143e0f6f09a80577791030c2d7de27467bc56c6cc19fa.png" src="_images/34470da59992b4c00b4143e0f6f09a80577791030c2d7de27467bc56c6cc19fa.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_trimestre&#39;: 30,436 outliers detectados (fuera de [0.00, 0.00])
</pre></div>
</div>
<img alt="_images/7f7ad8a873308a35e46ea4235ff88d8a2aba102a0dfb798d9c321aa7fbbde738.png" src="_images/7f7ad8a873308a35e46ea4235ff88d8a2aba102a0dfb798d9c321aa7fbbde738.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;consultas_buro_anio&#39;: 3,925 outliers detectados (fuera de [-2.00, 6.00])
</pre></div>
</div>
<img alt="_images/764d60b548b9057bf9c9b2fffe6563397670863737dfdced9835b97e91f25931.png" src="_images/764d60b548b9057bf9c9b2fffe6563397670863737dfdced9835b97e91f25931.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;entradas_buro&#39;: 5,988 outliers detectados (fuera de [-4.50, 15.50])
</pre></div>
</div>
<img alt="_images/a1c45ab66047aaafcc9c6ea96c021a3bbec8f3978b4bd12c65231413efa874af.png" src="_images/a1c45ab66047aaafcc9c6ea96c021a3bbec8f3978b4bd12c65231413efa874af.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;tipos_credito_activo&#39;: 1 outliers detectados (fuera de [-0.50, 3.50])
</pre></div>
</div>
<img alt="_images/e83bdf4b4be3a0ec50b0e4653df35686d3d250c6c9a739ceeed5a066dc2708bd.png" src="_images/e83bdf4b4be3a0ec50b0e4653df35686d3d250c6c9a739ceeed5a066dc2708bd.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;suma_total_credito&#39;: 12,452 outliers detectados (fuera de [-2941017.87, 5959406.40])
</pre></div>
</div>
<img alt="_images/5b50a19bfa08e34f7c186e0bc775101a17c8d8362f33bbf6b3395207bbc4d240.png" src="_images/5b50a19bfa08e34f7c186e0bc775101a17c8d8362f33bbf6b3395207bbc4d240.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;cantidad_solicitudes_previas&#39;: 5,140 outliers detectados (fuera de [-5.50, 14.50])
</pre></div>
</div>
<img alt="_images/828e7e93199fd384a465fe1cc8e8ec72845be6aa7b0c1e961041ca8b92c81e99.png" src="_images/828e7e93199fd384a465fe1cc8e8ec72845be6aa7b0c1e961041ca8b92c81e99.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;monto_promedio_solicitudes&#39;: 11,263 outliers detectados (fuera de [-134143.00, 386161.80])
</pre></div>
</div>
<img alt="_images/f5461c2d35ab7e8a083b720c16f86478310c1b338d27b1adfcb2225578c488e3.png" src="_images/f5461c2d35ab7e8a083b720c16f86478310c1b338d27b1adfcb2225578c488e3.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;monto_total_credito&#39;: 12,867 outliers detectados (fuera de [-1385061.75, 2748629.25])
</pre></div>
</div>
<img alt="_images/393e7c452e575c1e1043fe5789d951a8a80c1876acaa61bada2de86856dde512.png" src="_images/393e7c452e575c1e1043fe5789d951a8a80c1876acaa61bada2de86856dde512.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;cuentas_pos_cash&#39;: 6,941 outliers detectados (fuera de [-28.50, 79.50])
</pre></div>
</div>
<img alt="_images/19f22567dd6c0bed966008bc8971de0caf573c4f22e7c19819a53cf1755c19a8.png" src="_images/19f22567dd6c0bed966008bc8971de0caf573c4f22e7c19819a53cf1755c19a8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;promedio_meses_saldo&#39;: 1,322 outliers detectados (fuera de [-87.41, 26.04])
</pre></div>
</div>
<img alt="_images/aca226df16b180143c62b82e74d51e1dd24ef617293d83f21526088d488dff7f.png" src="_images/aca226df16b180143c62b82e74d51e1dd24ef617293d83f21526088d488dff7f.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;total_cuotas&#39;: 12,812 outliers detectados (fuera de [-46.50, 109.50])
</pre></div>
</div>
<img alt="_images/5e2f51b1ba91353a74b2270775ed806f2f5642544cf2ea5cee6c0cc4b578578e.png" src="_images/5e2f51b1ba91353a74b2270775ed806f2f5642544cf2ea5cee6c0cc4b578578e.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;total_pagado&#39;: 14,556 outliers detectados (fuera de [-932532.94, 1916806.00])
</pre></div>
</div>
<img alt="_images/1a3ff3da0081f02314b5aa0b9b3cf8dab4855179e1b1541928d501ea56f31759.png" src="_images/1a3ff3da0081f02314b5aa0b9b3cf8dab4855179e1b1541928d501ea56f31759.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;numero_hijos&#39;: 2,670 outliers detectados (fuera de [-1.50, 2.50])
</pre></div>
</div>
<img alt="_images/fd197adbac548b13e5d7694458545b164fdfb16deac48b80d23bde51a871b184.png" src="_images/fd197adbac548b13e5d7694458545b164fdfb16deac48b80d23bde51a871b184.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;ingreso_total&#39;: 4,555 outliers detectados (fuera de [-49500.00, 382500.00])
</pre></div>
</div>
<img alt="_images/7fc7a1262621f2d209caa300d9adddcc0ec9d97724aae06b20258e70aa299043.png" src="_images/7fc7a1262621f2d209caa300d9adddcc0ec9d97724aae06b20258e70aa299043.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;cuota_periodica&#39;: 2,751 outliers detectados (fuera de [-10237.50, 63238.50])
</pre></div>
</div>
<img alt="_images/fe0df44de22e4072f9aa17758838b81dd8ea304a50511070b6d281f51bef7d21.png" src="_images/fe0df44de22e4072f9aa17758838b81dd8ea304a50511070b6d281f51bef7d21.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;poblacion_relativa_region&#39;: 3,321 outliers detectados (fuera de [-0.02, 0.06])
</pre></div>
</div>
<img alt="_images/7d78d9fe6cd75773f71e9f73baa1719649ce1e6b01395f70b9dfbd580f910219.png" src="_images/7d78d9fe6cd75773f71e9f73baa1719649ce1e6b01395f70b9dfbd580f910219.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;dias_desde_nacimiento&#39;: 0 outliers detectados (fuera de [-25991.38, -3574.38])
</pre></div>
</div>
<img alt="_images/21232ad936ed2c74a8e5a31b2f3d653c68e8db8933e518bbd2c825ded91c4318.png" src="_images/21232ad936ed2c74a8e5a31b2f3d653c68e8db8933e518bbd2c825ded91c4318.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;dias_desde_registro&#39;: 357 outliers detectados (fuera de [-14603.50, 5800.50])
</pre></div>
</div>
<img alt="_images/24b8ac00f6bb36db81e796457272b5a8f71daed39a37a71fcb81d45e20bd9836.png" src="_images/24b8ac00f6bb36db81e796457272b5a8f71daed39a37a71fcb81d45e20bd9836.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;dias_desde_emision_id&#39;: 0 outliers detectados (fuera de [-8151.00, 2345.00])
</pre></div>
</div>
<img alt="_images/f85cc1e241b630e64eacae6a81270ab66f016683bd60c5f9d08377eecd0ba3be.png" src="_images/f85cc1e241b630e64eacae6a81270ab66f016683bd60c5f9d08377eecd0ba3be.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;numero_miembros_familia&#39;: 2,528 outliers detectados (fuera de [0.50, 4.50])
</pre></div>
</div>
<img alt="_images/400438c3e4fbf1b3483eb7dfe8a8cf7777564af60a00276efa0d5f94a12a45da.png" src="_images/400438c3e4fbf1b3483eb7dfe8a8cf7777564af60a00276efa0d5f94a12a45da.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;hora_solicitud&#39;: 244 outliers detectados (fuera de [2.50, 22.50])
</pre></div>
</div>
<img alt="_images/007091d6338f6a16fb9ce8c6d8a3a6989900db265dfc20e98581c4899acbdbd5.png" src="_images/007091d6338f6a16fb9ce8c6d8a3a6989900db265dfc20e98581c4899acbdbd5.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &#39;promedio_dias_entre_registro_y_pago&#39;: 857 outliers detectados (fuera de [-2630.25, 837.54])
</pre></div>
</div>
<img alt="_images/137228ed94af527882b53289337584c615ca0d0501a1be78add175c84841bbbb.png" src="_images/137228ed94af527882b53289337584c615ca0d0501a1be78add175c84841bbbb.png" />
</div>
</div>
</section>
<section id="eliminar-valores-negativos">
<h3>3.7.2. Eliminar valores negativos<a class="headerlink" href="#eliminar-valores-negativos" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_pagado&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_cuotas&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cuentas_pos_cash&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;monto_total_credito&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="log-transformaciones-de-variables">
<h3>3.7.3. Log-Transformaciones de Variables<a class="headerlink" href="#log-transformaciones-de-variables" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Aplicar log1p a cada variable y reemplazar en el mismo df</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;ingreso_total&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;ingreso_total&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cuota_periodica&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cuota_periodica&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_anio&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_anio&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;entradas_buro&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;entradas_buro&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_pagado&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_pagado&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_cuotas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;total_cuotas&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cuentas_pos_cash&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cuentas_pos_cash&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;monto_promedio_solicitudes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;monto_promedio_solicitudes&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cantidad_solicitudes_previas&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cantidad_solicitudes_previas&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;suma_total_credito&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;suma_total_credito&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;monto_total_credito&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;monto_total_credito&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Transformación logarítmica aplicada a las siguientes variables: ingreso_total, cuota_periodica, consultas_buro_anio, entradas_buro, total_pagado, total_cuotas, cuentas_pos_cash, monto_promedio_solicitudes, cantidad_solicitudes_previas, suma_total_credito, monto_total_credito.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Transformación logarítmica aplicada a las siguientes variables: ingreso_total, cuota_periodica, consultas_buro_anio, entradas_buro, total_pagado, total_cuotas, cuentas_pos_cash, monto_promedio_solicitudes, cantidad_solicitudes_previas, suma_total_credito, monto_total_credito.
</pre></div>
</div>
</div>
</div>
</section>
<section id="binarizar-variables">
<h3>3.7.4. Binarizar Variables<a class="headerlink" href="#binarizar-variables" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Binarizar variables</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_hora&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_hora&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_dia&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_dia&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_semana&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_semana&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_mes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_mes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_trimestre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;consultas_buro_trimestre&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;incumplimientos_30_dias&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;incumplimientos_30_dias&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;default_60_dias_circulo_social&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;default_60_dias_circulo_social&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;dias_ultimo_cambio_telefono&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;dias_ultimo_cambio_telefono&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Variables binarizadas y originales eliminadas correctamente.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Variables binarizadas y originales eliminadas correctamente.
</pre></div>
</div>
</div>
</div>
</section>
<section id="categorizar-variables">
<h3>3.7.5. Categorizar Variables<a class="headerlink" href="#categorizar-variables" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. numero_hijos</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;numero_hijos&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;numero_hijos&#39;</span><span class="p">],</span>
                                <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span>
                                <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Sin hijos&#39;</span><span class="p">,</span> <span class="s1">&#39;1-2 hijos&#39;</span><span class="p">,</span> <span class="s1">&#39;3-5 hijos&#39;</span><span class="p">,</span> <span class="s1">&#39;6 o más&#39;</span><span class="p">])</span>

<span class="c1"># 2. numero_miembros_familia</span>
<span class="c1"># Agrupar familias grandes en una sola categoría</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;numero_miembros_familia&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;numero_miembros_familia&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">6</span> <span class="k">else</span> <span class="mi">7</span><span class="p">)</span>

<span class="c1"># 3. hora_solicitud</span>
<span class="k">def</span> <span class="nf">agrupar_hora</span><span class="p">(</span><span class="n">hora</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">hora</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Madrugada&#39;</span>
    <span class="k">elif</span> <span class="n">hora</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Mañana&#39;</span>
    <span class="k">elif</span> <span class="n">hora</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Tarde&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;Noche&#39;</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;hora_solicitud&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;hora_solicitud&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">agrupar_hora</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Variables agrupadas en categorias correctamente.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Variables agrupadas en categorias correctamente.
</pre></div>
</div>
</div>
</div>
</section>
<section id="eliminar-outliers">
<h3>3.7.6. Eliminar Outliers<a class="headerlink" href="#eliminar-outliers" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Umbrales para eliminar outliers</span>
<span class="n">umbrales_mayor_a</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ingreso_total&#39;</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
    <span class="s1">&#39;consultas_buro_anio&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
    <span class="s1">&#39;entradas_buro&#39;</span><span class="p">:</span> <span class="mf">4.0</span>
<span class="p">}</span>

<span class="n">umbrales_menor_a</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;monto_total_credito&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;cuentas_pos_cash&#39;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="c1"># Eliminar observaciones mayores a los umbrales definidos</span>
<span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">umbral</span> <span class="ow">in</span> <span class="n">umbrales_mayor_a</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">umbral</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠️ Variable no encontrada: </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Eliminar observaciones menores a los umbrales definidos</span>
<span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">umbral</span> <span class="ow">in</span> <span class="n">umbrales_menor_a</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">var</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">umbral</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠️ Variable no encontrada: </span><span class="si">{</span><span class="n">var</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Mostrar shape final</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ Shape final del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>✅ Shape final del DataFrame: (156882, 54)
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualizacion-de-variables-numericas-modificadas">
<h3>3.7.7. Visualización de Variables Numéricas Modificadas<a class="headerlink" href="#visualizacion-de-variables-numericas-modificadas" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Filtrar variables numéricas verdaderas (no dummies)</span>
<span class="n">numericas_no_dummies</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;int64&#39;</span><span class="p">,</span> <span class="s1">&#39;float64&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span>
    <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">2</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">numericas_no_dummies</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">Q1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
        <span class="n">Q3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>
        <span class="n">limite_inferior</span> <span class="o">=</span> <span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>
        <span class="n">limite_superior</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>

        <span class="n">outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">limite_inferior</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">limite_superior</span><span class="p">)]</span>
        <span class="n">num_outliers</span> <span class="o">=</span> <span class="n">outliers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;width_ratios&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#9B4F5F&quot;</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Histograma de &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#b6e2b6&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Boxplot de &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
        <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([])</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;📌 &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">num_outliers</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> outliers detectados (fuera de [</span><span class="si">{</span><span class="n">limite_inferior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">limite_superior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">])&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⚠️ Error procesando la columna &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;ingreso_total&#39;: 1,046 outliers detectados (fuera de [10.62, 13.31])
</pre></div>
</div>
<img alt="_images/31a9866b0d4c289be57345a5803fb3f1068fd0b742e65c0c7576557fb672d26c.png" src="_images/31a9866b0d4c289be57345a5803fb3f1068fd0b742e65c0c7576557fb672d26c.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;cuota_periodica&#39;: 1,186 outliers detectados (fuera de [8.67, 11.57])
</pre></div>
</div>
<img alt="_images/479db8287abe6b39e739bf49693be81b30bd5bad853491d5710c465da54b8ba8.png" src="_images/479db8287abe6b39e739bf49693be81b30bd5bad853491d5710c465da54b8ba8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;poblacion_relativa_region&#39;: 3,313 outliers detectados (fuera de [-0.02, 0.06])
</pre></div>
</div>
<img alt="_images/4c5335d0467e37f119f149af27d98eda4d34a5c0d0cb414d1ff86d22fd25fed4.png" src="_images/4c5335d0467e37f119f149af27d98eda4d34a5c0d0cb414d1ff86d22fd25fed4.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;dias_desde_nacimiento&#39;: 0 outliers detectados (fuera de [-25994.00, -3570.00])
</pre></div>
</div>
<img alt="_images/7ee16ebb2929286a93d8fc77e94b5f7c9acb17c6cf3f2328e29ecbd21b2bffef.png" src="_images/7ee16ebb2929286a93d8fc77e94b5f7c9acb17c6cf3f2328e29ecbd21b2bffef.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;dias_desde_registro&#39;: 357 outliers detectados (fuera de [-14603.50, 5800.50])
</pre></div>
</div>
<img alt="_images/8e9fb1ccc98366f04445abad640147299bf516fa82176c6aeed09990c4b1ca19.png" src="_images/8e9fb1ccc98366f04445abad640147299bf516fa82176c6aeed09990c4b1ca19.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;dias_desde_emision_id&#39;: 0 outliers detectados (fuera de [-8149.50, 2342.50])
</pre></div>
</div>
<img alt="_images/ac8c96d12283e29db33454b752ab676f07b7415cef6cfe48c51a46e81d3ad852.png" src="_images/ac8c96d12283e29db33454b752ab676f07b7415cef6cfe48c51a46e81d3ad852.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;numero_miembros_familia&#39;: 2,525 outliers detectados (fuera de [0.50, 4.50])
</pre></div>
</div>
<img alt="_images/9225b86dab5569c09811272aeda24382bb5b5eba1efbf30aff803fd1c2564250.png" src="_images/9225b86dab5569c09811272aeda24382bb5b5eba1efbf30aff803fd1c2564250.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;fuente_externa_2&#39;: 749 outliers detectados (fuera de [0.01, 1.05])
</pre></div>
</div>
<img alt="_images/52b9e8fff813929a36aa58ad2103d89cae412893143d7bee4e5f9c36aa397476.png" src="_images/52b9e8fff813929a36aa58ad2103d89cae412893143d7bee4e5f9c36aa397476.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;fuente_externa_3&#39;: 0 outliers detectados (fuera de [-0.09, 1.11])
</pre></div>
</div>
<img alt="_images/1bdcb3439367e50f635928ffe6070e9a45597a4ea74a460c21108a46c1d0063c.png" src="_images/1bdcb3439367e50f635928ffe6070e9a45597a4ea74a460c21108a46c1d0063c.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;consultas_buro_anio&#39;: 42 outliers detectados (fuera de [-0.35, 2.43])
</pre></div>
</div>
<img alt="_images/49e179f4eb45ed5e5fc2152f07fc991562a09d544df87fd50d290ccced5623ef.png" src="_images/49e179f4eb45ed5e5fc2152f07fc991562a09d544df87fd50d290ccced5623ef.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;entradas_buro&#39;: 192 outliers detectados (fuera de [0.17, 3.41])
</pre></div>
</div>
<img alt="_images/4aa9bd15969ec6668bc00989adac499a057f6b3ccc4fec6347ce40980efa2be0.png" src="_images/4aa9bd15969ec6668bc00989adac499a057f6b3ccc4fec6347ce40980efa2be0.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;tipos_credito_activo&#39;: 1 outliers detectados (fuera de [-0.50, 3.50])
</pre></div>
</div>
<img alt="_images/d54d7c8a639f049c70e193d4219148392ebf3a34cace2e38a1d2fd271f161428.png" src="_images/d54d7c8a639f049c70e193d4219148392ebf3a34cace2e38a1d2fd271f161428.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;suma_total_credito&#39;: 1,666 outliers detectados (fuera de [10.06, 17.61])
</pre></div>
</div>
<img alt="_images/db2817306bbbf74426a8cb5b816df6820d8ebc0d71f68aae9cad7edba81a48a9.png" src="_images/db2817306bbbf74426a8cb5b816df6820d8ebc0d71f68aae9cad7edba81a48a9.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;cantidad_solicitudes_previas&#39;: 123 outliers detectados (fuera de [-0.37, 3.55])
</pre></div>
</div>
<img alt="_images/8c65be59f15f993525f9251d7564b6e92b3cce80a2834124806a8b8c53ca60f6.png" src="_images/8c65be59f15f993525f9251d7564b6e92b3cce80a2834124806a8b8c53ca60f6.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;monto_promedio_solicitudes&#39;: 1,204 outliers detectados (fuera de [9.31, 13.87])
</pre></div>
</div>
<img alt="_images/b64762d9b81365f099cc59ba0f0912389abafe98a5c438443eb150691227cef8.png" src="_images/b64762d9b81365f099cc59ba0f0912389abafe98a5c438443eb150691227cef8.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;monto_total_credito&#39;: 30 outliers detectados (fuera de [9.04, 16.97])
</pre></div>
</div>
<img alt="_images/d6807491bd005dd2b8c7ba086c7cf8c9957655e8173cc3ac7370c21e6e2361d3.png" src="_images/d6807491bd005dd2b8c7ba086c7cf8c9957655e8173cc3ac7370c21e6e2361d3.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;cuentas_pos_cash&#39;: 9 outliers detectados (fuera de [0.88, 5.37])
</pre></div>
</div>
<img alt="_images/f5ac52fc334b517069033ac312149e5dd95c29c1385a666f7b298dfea89aeabb.png" src="_images/f5ac52fc334b517069033ac312149e5dd95c29c1385a666f7b298dfea89aeabb.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;promedio_meses_saldo&#39;: 1,271 outliers detectados (fuera de [-87.38, 26.03])
</pre></div>
</div>
<img alt="_images/af5a24a766be0df754dabef0e61493e1ac5a3bbbac36052fc787d21340b5ab87.png" src="_images/af5a24a766be0df754dabef0e61493e1ac5a3bbbac36052fc787d21340b5ab87.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;total_cuotas&#39;: 0 outliers detectados (fuera de [0.49, 6.03])
</pre></div>
</div>
<img alt="_images/2b31d961743bf56338c4e9ee17fab9b36ae2b01451ebc5170aa51959c40e9dd3.png" src="_images/2b31d961743bf56338c4e9ee17fab9b36ae2b01451ebc5170aa51959c40e9dd3.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;total_pagado&#39;: 58 outliers detectados (fuera de [9.07, 16.40])
</pre></div>
</div>
<img alt="_images/0f2c628df74f91bc9a871e3d88468d29afd5634d0b7d5e0467eee2bf8308aa44.png" src="_images/0f2c628df74f91bc9a871e3d88468d29afd5634d0b7d5e0467eee2bf8308aa44.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>📌 &#39;promedio_dias_entre_registro_y_pago&#39;: 837 outliers detectados (fuera de [-2628.62, 836.14])
</pre></div>
</div>
<img alt="_images/fc3c905b6cf96d462c32a8c6186d942bece922a4e3c95e55ac137375d22efcf5.png" src="_images/fc3c905b6cf96d462c32a8c6186d942bece922a4e3c95e55ac137375d22efcf5.png" />
</div>
</div>
</section>
<section id="id3">
<h3>3.7.8. Exploración Descriptiva de Variables Filtradas<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Agregar estadísticas solo si es numérica</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">std</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
            <span class="n">minimo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">maximo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mediana</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">std</span> <span class="o">=</span> <span class="n">minimo</span> <span class="o">=</span> <span class="n">maximo</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">mediana</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
            <span class="s1">&#39;moda&#39;</span><span class="p">:</span> <span class="n">moda</span><span class="p">,</span>
            <span class="s1">&#39;moda (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">moda_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_pct</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;desv. estándar&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">std</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;mínimo&#39;</span><span class="p">:</span> <span class="n">minimo</span><span class="p">,</span>
            <span class="s1">&#39;Q1&#39;</span><span class="p">:</span> <span class="n">q1</span><span class="p">,</span>
            <span class="s1">&#39;mediana&#39;</span><span class="p">:</span> <span class="n">mediana</span><span class="p">,</span>
            <span class="s1">&#39;Q3&#39;</span><span class="p">:</span> <span class="n">q3</span><span class="p">,</span>
            <span class="s1">&#39;máximo&#39;</span><span class="p">:</span> <span class="n">maximo</span>
        <span class="p">})</span>

    <span class="c1"># Imprimir resumen general</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> filas x </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> columnas&quot;</span><span class="p">)</span>
    <span class="n">num_con_nulos</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables con al menos un valor nulo: </span><span class="si">{</span><span class="n">num_con_nulos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos (#)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Aplicar función y guardar resultado</span>
<span class="n">tabla_variables</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">tabla_variables</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del DataFrame: 156,882 filas x 54 columnas
Variables con al menos un valor nulo: 0
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
      <th>moda</th>
      <th>moda (%)</th>
      <th>media</th>
      <th>desv. estándar</th>
      <th>mínimo</th>
      <th>Q1</th>
      <th>mediana</th>
      <th>Q3</th>
      <th>máximo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>incumplimiento_credito</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>91.45</td>
      <td>0.09</td>
      <td>0.28</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>consultas_buro_mes</td>
      <td>int32</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[0, 1]</td>
      <td>0</td>
      <td>82.22</td>
      <td>0.18</td>
      <td>0.38</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fuente_externa_2</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>86596</td>
      <td>Más de 10 valores únicos</td>
      <td>0.285898</td>
      <td>0.25</td>
      <td>0.52</td>
      <td>0.19</td>
      <td>0.000005</td>
      <td>0.403418</td>
      <td>0.569460</td>
      <td>0.663778</td>
      <td>0.855000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>fuente_externa_3</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>794</td>
      <td>Más de 10 valores únicos</td>
      <td>0.7463</td>
      <td>0.52</td>
      <td>0.50</td>
      <td>0.20</td>
      <td>0.000527</td>
      <td>0.357293</td>
      <td>0.520898</td>
      <td>0.657784</td>
      <td>0.885488</td>
    </tr>
    <tr>
      <th>4</th>
      <td>incumplimientos_30_dias</td>
      <td>int32</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>88.57</td>
      <td>0.11</td>
      <td>0.32</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id4">
<h3>3.7.9. Clasificación de Variables<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Clasificación de variables para el df transformado</span>

<span class="c1"># 1. Variables categóricas (tipo object)</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Dummies: tipo int64 con solo 2 valores únicos</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 3. Variables numéricas reales (más de 2 valores únicos o tipo float64)</span>
<span class="n">numericas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">|</span> <span class="p">(</span>
        <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;float64&#39;</span>
    <span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># Mostrar resultados</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables categóricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">categoricas</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">categoricas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables dummies (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">dummies</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables numéricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">numericas</span><span class="p">)</span><span class="si">}</span><span class="s2">): </span><span class="si">{</span><span class="n">numericas</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Mostrar shape final</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Shape del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Variables categóricas (9): [&#39;acompanantes_solicitud&#39;, &#39;tipo_ingreso&#39;, &#39;nivel_educativo&#39;, &#39;estado_civil&#39;, &#39;tipo_vivienda&#39;, &#39;ocupacion&#39;, &#39;dia_solicitud&#39;, &#39;hora_solicitud&#39;, &#39;tipo_organizacion&#39;]
Variables dummies (11): [&#39;incumplimiento_credito&#39;, &#39;documento_3&#39;, &#39;documento_6&#39;, &#39;documento_8&#39;, &#39;ciudad_residencia_distinta_trabajo&#39;, &#39;trabaja_fuera_ciudad_registrada&#39;, &#39;vive_fuera_ciudad_registrada&#39;, &#39;telefono_trabajo&#39;, &#39;telefono_personal&#39;, &#39;tiene_email&#39;, &#39;trabaja_fuera_region_registrada&#39;]
Variables numéricas (21): [&#39;fuente_externa_2&#39;, &#39;fuente_externa_3&#39;, &#39;consultas_buro_anio&#39;, &#39;entradas_buro&#39;, &#39;tipos_credito_activo&#39;, &#39;suma_total_credito&#39;, &#39;cantidad_solicitudes_previas&#39;, &#39;monto_promedio_solicitudes&#39;, &#39;monto_total_credito&#39;, &#39;cuentas_pos_cash&#39;, &#39;promedio_meses_saldo&#39;, &#39;total_cuotas&#39;, &#39;total_pagado&#39;, &#39;ingreso_total&#39;, &#39;cuota_periodica&#39;, &#39;poblacion_relativa_region&#39;, &#39;dias_desde_nacimiento&#39;, &#39;dias_desde_registro&#39;, &#39;dias_desde_emision_id&#39;, &#39;numero_miembros_familia&#39;, &#39;promedio_dias_entre_registro_y_pago&#39;]
Shape del DataFrame: (156882, 54)
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="graficas-de-variables-dummies">
<h2>3.8. Gráficas de Variables Dummies<a class="headerlink" href="#graficas-de-variables-dummies" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Dummies (int64 con solo 2 categorías):</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Definir estilo gráfico</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="c1"># 4. Parámetros para layout</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="n">cols</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">cols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">cols</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="n">rows</span> <span class="o">*</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="c1"># 5. Crear gráfico de barras para cada dummy con porcentaje</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dummies</span><span class="p">):</span>
    <span class="n">conteo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">conteo</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="n">conteo</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">conteo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">conteo</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#d89ca1&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Distribución de &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Valor&quot;</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>

    <span class="c1"># Mostrar porcentaje sobre cada barra</span>
    <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">conteo</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">val</span> <span class="o">+</span> <span class="n">total</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">porcentaje</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
                     <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>

<span class="c1"># 6. Eliminar subplots vacíos</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f881b41756cac6209daed0f8fd61b34a8259271609519c2abd8e0c18dcf05c09.png" src="_images/f881b41756cac6209daed0f8fd61b34a8259271609519c2abd8e0c18dcf05c09.png" />
</div>
</div>
</section>
<section id="exploracion-descriptiva-de-variables-finales">
<h2>3.9. Exploración Descriptiva de Variables Finales<a class="headerlink" href="#exploracion-descriptiva-de-variables-finales" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Agregar estadísticas solo si es numérica</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">std</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
            <span class="n">minimo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">maximo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mediana</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">std</span> <span class="o">=</span> <span class="n">minimo</span> <span class="o">=</span> <span class="n">maximo</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">mediana</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
            <span class="s1">&#39;moda&#39;</span><span class="p">:</span> <span class="n">moda</span><span class="p">,</span>
            <span class="s1">&#39;moda (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">moda_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_pct</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;desv. estándar&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">std</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;mínimo&#39;</span><span class="p">:</span> <span class="n">minimo</span><span class="p">,</span>
            <span class="s1">&#39;Q1&#39;</span><span class="p">:</span> <span class="n">q1</span><span class="p">,</span>
            <span class="s1">&#39;mediana&#39;</span><span class="p">:</span> <span class="n">mediana</span><span class="p">,</span>
            <span class="s1">&#39;Q3&#39;</span><span class="p">:</span> <span class="n">q3</span><span class="p">,</span>
            <span class="s1">&#39;máximo&#39;</span><span class="p">:</span> <span class="n">maximo</span>
        <span class="p">})</span>

    <span class="c1"># Imprimir resumen general</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> filas x </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> columnas&quot;</span><span class="p">)</span>
    <span class="n">num_con_nulos</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables con al menos un valor nulo: </span><span class="si">{</span><span class="n">num_con_nulos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos (#)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Aplicar función y guardar resultado</span>
<span class="n">tabla_variables</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">tabla_variables</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del DataFrame: 156,882 filas x 54 columnas
Variables con al menos un valor nulo: 0
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
      <th>moda</th>
      <th>moda (%)</th>
      <th>media</th>
      <th>desv. estándar</th>
      <th>mínimo</th>
      <th>Q1</th>
      <th>mediana</th>
      <th>Q3</th>
      <th>máximo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>incumplimiento_credito</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>91.45</td>
      <td>0.09</td>
      <td>0.28</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>consultas_buro_mes</td>
      <td>int32</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[0, 1]</td>
      <td>0</td>
      <td>82.22</td>
      <td>0.18</td>
      <td>0.38</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fuente_externa_2</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>86596</td>
      <td>Más de 10 valores únicos</td>
      <td>0.285898</td>
      <td>0.25</td>
      <td>0.52</td>
      <td>0.19</td>
      <td>0.000005</td>
      <td>0.403418</td>
      <td>0.569460</td>
      <td>0.663778</td>
      <td>0.855000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>fuente_externa_3</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>794</td>
      <td>Más de 10 valores únicos</td>
      <td>0.7463</td>
      <td>0.52</td>
      <td>0.50</td>
      <td>0.20</td>
      <td>0.000527</td>
      <td>0.357293</td>
      <td>0.520898</td>
      <td>0.657784</td>
      <td>0.885488</td>
    </tr>
    <tr>
      <th>4</th>
      <td>incumplimientos_30_dias</td>
      <td>int32</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>88.57</td>
      <td>0.11</td>
      <td>0.32</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Variables categóricas (object):</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Dummies (int64 con solo 2 categorías):</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 3. Variables numéricas que no son dummies (int64 con más de 2 valores únicos o float64):</span>
<span class="n">numericas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">|</span> <span class="p">(</span>
        <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;float64&#39;</span>
    <span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Categóricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">categoricas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">categoricas</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dummies (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">dummies</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Numéricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">numericas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">numericas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Categóricas (9): [&#39;tipo_organizacion&#39;, &#39;acompanantes_solicitud&#39;, &#39;tipo_ingreso&#39;, &#39;nivel_educativo&#39;, &#39;estado_civil&#39;, &#39;tipo_vivienda&#39;, &#39;ocupacion&#39;, &#39;dia_solicitud&#39;, &#39;hora_solicitud&#39;]
Dummies (11): [&#39;incumplimiento_credito&#39;, &#39;documento_3&#39;, &#39;documento_6&#39;, &#39;documento_8&#39;, &#39;ciudad_residencia_distinta_trabajo&#39;, &#39;trabaja_fuera_ciudad_registrada&#39;, &#39;vive_fuera_ciudad_registrada&#39;, &#39;telefono_trabajo&#39;, &#39;telefono_personal&#39;, &#39;tiene_email&#39;, &#39;trabaja_fuera_region_registrada&#39;]
Numéricas (21): [&#39;fuente_externa_2&#39;, &#39;fuente_externa_3&#39;, &#39;consultas_buro_anio&#39;, &#39;entradas_buro&#39;, &#39;tipos_credito_activo&#39;, &#39;suma_total_credito&#39;, &#39;cantidad_solicitudes_previas&#39;, &#39;monto_promedio_solicitudes&#39;, &#39;monto_total_credito&#39;, &#39;cuentas_pos_cash&#39;, &#39;promedio_meses_saldo&#39;, &#39;total_cuotas&#39;, &#39;total_pagado&#39;, &#39;ingreso_total&#39;, &#39;cuota_periodica&#39;, &#39;poblacion_relativa_region&#39;, &#39;dias_desde_nacimiento&#39;, &#39;dias_desde_registro&#39;, &#39;dias_desde_emision_id&#39;, &#39;numero_miembros_familia&#39;, &#39;promedio_dias_entre_registro_y_pago&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="guardar-base-de-datos-final">
<h2>3.10. Guardar Base de Datos Final<a class="headerlink" href="#guardar-base-de-datos-final" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Guardar el dataset consolidado como CSV</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_final.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Archivo guardado exitosamente como &#39;credit_risk_final.csv&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Archivo guardado exitosamente como &#39;credit_risk_final.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="estratificacion-aleatoria-de-la-base-de-datos">
<h1>4.Estratificación aleatoria de la Base de datos<a class="headerlink" href="#estratificacion-aleatoria-de-la-base-de-datos" title="Permalink to this heading">#</a></h1>
<section id="cargar-base-de-datos-final">
<h2>4.1. Cargar Base de Datos Final<a class="headerlink" href="#cargar-base-de-datos-final" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Cargar el archivo consolidado desde la ruta</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_final.csv&#39;</span><span class="p">)</span>

<span class="c1"># Verificar que se cargó correctamente</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Dataset cargado correctamente. Dimensiones:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataset cargado correctamente. Dimensiones: (156882, 54)
</pre></div>
</div>
</div>
</div>
</section>
<section id="id5">
<h2>4.2. Exploración Descriptiva de Variables Finales<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">info</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span>
        <span class="n">tipo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dtype</span>
        <span class="n">nulos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
        <span class="n">nulos_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">nulos</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">nunique</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">valores_unicos</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span> <span class="k">if</span> <span class="n">nunique</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s1">&#39;Más de 10 valores únicos&#39;</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_freq</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">empty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="n">moda_pct</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">moda_freq</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_freq</span> <span class="k">else</span> <span class="kc">None</span>

        <span class="c1"># Agregar estadísticas solo si es numérica</span>
        <span class="k">if</span> <span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_numeric_dtype</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
            <span class="n">std</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
            <span class="n">minimo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
            <span class="n">maximo</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
            <span class="n">q1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
            <span class="n">mediana</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
            <span class="n">q3</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">std</span> <span class="o">=</span> <span class="n">minimo</span> <span class="o">=</span> <span class="n">maximo</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">=</span> <span class="n">mediana</span> <span class="o">=</span> <span class="n">q3</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">info</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;columna&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="n">tipo</span><span class="p">,</span>
            <span class="s1">&#39;nulos (#)&#39;</span><span class="p">:</span> <span class="n">nulos</span><span class="p">,</span>
            <span class="s1">&#39;nulos (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">nulos_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;nunique&#39;</span><span class="p">:</span> <span class="n">nunique</span><span class="p">,</span>
            <span class="s1">&#39;unique&#39;</span><span class="p">:</span> <span class="n">valores_unicos</span><span class="p">,</span>
            <span class="s1">&#39;moda&#39;</span><span class="p">:</span> <span class="n">moda</span><span class="p">,</span>
            <span class="s1">&#39;moda (%)&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">moda_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">moda_pct</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;media&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">media</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;desv. estándar&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">std</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">if</span> <span class="n">std</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;mínimo&#39;</span><span class="p">:</span> <span class="n">minimo</span><span class="p">,</span>
            <span class="s1">&#39;Q1&#39;</span><span class="p">:</span> <span class="n">q1</span><span class="p">,</span>
            <span class="s1">&#39;mediana&#39;</span><span class="p">:</span> <span class="n">mediana</span><span class="p">,</span>
            <span class="s1">&#39;Q3&#39;</span><span class="p">:</span> <span class="n">q3</span><span class="p">,</span>
            <span class="s1">&#39;máximo&#39;</span><span class="p">:</span> <span class="n">maximo</span>
        <span class="p">})</span>

    <span class="c1"># Imprimir resumen general</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dimensiones del DataFrame: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2"> filas x </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> columnas&quot;</span><span class="p">)</span>
    <span class="n">num_con_nulos</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="mi">1</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">()])</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Variables con al menos un valor nulo: </span><span class="si">{</span><span class="n">num_con_nulos</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">info</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;nulos (#)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Aplicar función y guardar resultado</span>
<span class="n">tabla_variables</span> <span class="o">=</span> <span class="n">build_my_info_table</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Mostrar tabla</span>
<span class="n">tabla_variables</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dimensiones del DataFrame: 156,882 filas x 54 columnas
Variables con al menos un valor nulo: 0
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>columna</th>
      <th>dtype</th>
      <th>nulos (#)</th>
      <th>nulos (%)</th>
      <th>nunique</th>
      <th>unique</th>
      <th>moda</th>
      <th>moda (%)</th>
      <th>media</th>
      <th>desv. estándar</th>
      <th>mínimo</th>
      <th>Q1</th>
      <th>mediana</th>
      <th>Q3</th>
      <th>máximo</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>incumplimiento_credito</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>91.45</td>
      <td>0.09</td>
      <td>0.28</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>consultas_buro_mes</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[0, 1]</td>
      <td>0</td>
      <td>82.22</td>
      <td>0.18</td>
      <td>0.38</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2</th>
      <td>fuente_externa_2</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>86596</td>
      <td>Más de 10 valores únicos</td>
      <td>0.285898</td>
      <td>0.25</td>
      <td>0.52</td>
      <td>0.19</td>
      <td>0.000005</td>
      <td>0.403418</td>
      <td>0.569460</td>
      <td>0.663778</td>
      <td>0.855000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>fuente_externa_3</td>
      <td>float64</td>
      <td>0</td>
      <td>0.0</td>
      <td>794</td>
      <td>Más de 10 valores únicos</td>
      <td>0.7463</td>
      <td>0.52</td>
      <td>0.50</td>
      <td>0.20</td>
      <td>0.000527</td>
      <td>0.357293</td>
      <td>0.520898</td>
      <td>0.657784</td>
      <td>0.885488</td>
    </tr>
    <tr>
      <th>4</th>
      <td>incumplimientos_30_dias</td>
      <td>int64</td>
      <td>0</td>
      <td>0.0</td>
      <td>2</td>
      <td>[1, 0]</td>
      <td>0</td>
      <td>88.57</td>
      <td>0.11</td>
      <td>0.32</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="separar-variables-de-acuerdo-a-su-clasificacion">
<h2>4.3. Separar Variables de acuerdo a su Clasificación<a class="headerlink" href="#separar-variables-de-acuerdo-a-su-clasificacion" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Variables categóricas (object):</span>
<span class="n">categoricas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 2. Dummies (int64 con solo 2 categorías):</span>
<span class="n">dummies</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># 3. Variables numéricas que no son dummies (int64 con más de 2 valores únicos o float64):</span>
<span class="n">numericas</span> <span class="o">=</span> <span class="n">tabla_variables</span><span class="p">[</span>
    <span class="p">(</span>
        <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;int64&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;nunique&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
    <span class="p">)</span> <span class="o">|</span> <span class="p">(</span>
        <span class="n">tabla_variables</span><span class="p">[</span><span class="s1">&#39;dtype&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;float64&#39;</span>
    <span class="p">)</span>
<span class="p">][</span><span class="s1">&#39;columna&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Categóricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">categoricas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">categoricas</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Dummies (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">dummies</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">dummies</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Numéricas (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">numericas</span><span class="p">)</span><span class="si">}</span><span class="s2">):&quot;</span><span class="p">,</span> <span class="n">numericas</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Categóricas (10): [&#39;tipo_organizacion&#39;, &#39;numero_hijos&#39;, &#39;acompanantes_solicitud&#39;, &#39;tipo_ingreso&#39;, &#39;nivel_educativo&#39;, &#39;estado_civil&#39;, &#39;tipo_vivienda&#39;, &#39;ocupacion&#39;, &#39;dia_solicitud&#39;, &#39;hora_solicitud&#39;]
Dummies (23): [&#39;incumplimiento_credito&#39;, &#39;consultas_buro_mes&#39;, &#39;incumplimientos_30_dias&#39;, &#39;default_60_dias_circulo_social&#39;, &#39;dias_ultimo_cambio_telefono&#39;, &#39;documento_3&#39;, &#39;documento_6&#39;, &#39;documento_8&#39;, &#39;consultas_buro_hora&#39;, &#39;consultas_buro_dia&#39;, &#39;consultas_buro_semana&#39;, &#39;consultas_buro_trimestre&#39;, &#39;tipo_contrato&#39;, &#39;ciudad_residencia_distinta_trabajo&#39;, &#39;trabaja_fuera_ciudad_registrada&#39;, &#39;vive_fuera_ciudad_registrada&#39;, &#39;genero&#39;, &#39;posee_auto&#39;, &#39;posee_vivienda&#39;, &#39;telefono_trabajo&#39;, &#39;telefono_personal&#39;, &#39;tiene_email&#39;, &#39;trabaja_fuera_region_registrada&#39;]
Numéricas (21): [&#39;fuente_externa_2&#39;, &#39;fuente_externa_3&#39;, &#39;consultas_buro_anio&#39;, &#39;entradas_buro&#39;, &#39;tipos_credito_activo&#39;, &#39;suma_total_credito&#39;, &#39;cantidad_solicitudes_previas&#39;, &#39;monto_promedio_solicitudes&#39;, &#39;monto_total_credito&#39;, &#39;cuentas_pos_cash&#39;, &#39;promedio_meses_saldo&#39;, &#39;total_cuotas&#39;, &#39;total_pagado&#39;, &#39;ingreso_total&#39;, &#39;cuota_periodica&#39;, &#39;poblacion_relativa_region&#39;, &#39;dias_desde_nacimiento&#39;, &#39;dias_desde_registro&#39;, &#39;dias_desde_emision_id&#39;, &#39;numero_miembros_familia&#39;, &#39;promedio_dias_entre_registro_y_pago&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="estratificacion-50">
<h2>4.4. Estratificación 50%<a class="headerlink" href="#estratificacion-50" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_stratificado</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="n">test_size</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Mantener solo el 50%</span>
    <span class="n">stratify</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;incumplimiento_credito&#39;</span><span class="p">],</span>  <span class="c1"># Mantener proporciones de clases</span>
    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>  <span class="c1"># Para reproducibilidad</span>
<span class="p">)</span>

<span class="c1"># Mostrar forma y proporción de clases</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Tamaño del dataset estratificado: </span><span class="si">{</span><span class="n">df_stratificado</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Distribución de clases en &#39;incumplimiento_credito&#39;:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_stratificado</span><span class="p">[</span><span class="s1">&#39;incumplimiento_credito&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Tamaño del dataset estratificado: (78441, 54)
Distribución de clases en &#39;incumplimiento_credito&#39;:
incumplimiento_credito
0    0.915
1    0.085
Name: proportion, dtype: float64
</pre></div>
</div>
</div>
</div>
</section>
<section id="guardar-base-de-datos-the-end">
<h2>4.5. Guardar Base de Datos The End<a class="headerlink" href="#guardar-base-de-datos-the-end" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Guardar el dataset consolidado como CSV</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;/content/credit_risk_the_end.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Archivo guardado exitosamente como &#39;credit_risk_the_end.csv&#39;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Archivo guardado exitosamente como &#39;credit_risk_the_end.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="descripcion_del_proyecto.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">&lt;no title&gt;</p>
      </div>
    </a>
    <a class="right-next"
       href="clasificacion_bayesiana.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Clasificación Bayesiana</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Análisis Exploratorio (EDA)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#carga-de-datos-y-librerias"><strong>1. Carga de Datos y Librerías</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-librerias">1.1. Importar Librerías</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-datos-desde-archivos-csv">1.2. Cargar Datos desde Archivos CSV</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#agregacion-de-datos">1.3. Agregación de Datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-consolidada">1.4. Guardar Base de Datos Consolidada</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento-de-datos"><strong>2. Preprocesamiento de Datos</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-consolidada">2.1. Cargar Base de Datos Consolidada</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#identificacion-de-tipos-de-variables">2.2. Identificación de Tipos de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#seleccion-de-caracteristicas">2.3. Selección de características</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-variable-id">2.3.1. Eliminar Variable ID</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-valores-nulos-de-la-variable-objetivo">2.3.2. Eliminar Valores Nulos de la Variable Objetivo</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-columnas-con-mas-del-40-de-valores-nulos">2.3.3. Eliminar columnas con más del 40% de valores nulos.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-variables-con-una-sola-categoria-o-donde-una-categoria-domina-90">2.3.4. Eliminar variables con una sola categoría o donde una categoría domina &gt;90%.</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#alta-correlacion-con-otras-variables">2.3.5. Alta correlación con otras variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-muy-baja-frecuencia-de-una-clase-para-categoricas-o-dummies">2.3.6. Variables con muy baja frecuencia de una clase (para categóricas o dummies)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-nas">2.3.7. Eliminar NAs</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-filtrada">2.4. Guardar Base de Datos Filtrada</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-exploratorio-de-datos-eda"><strong>3. Análisis Exploratorio de Datos (EDA)</strong></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-filtrada">3.1. Cargar Base de Datos Filtrada</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#glosario-de-variables">3.2. Glosario de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#renombramiento-de-variables">3.3. Renombramiento de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-descriptiva-de-variables-filtradas">3.4. Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clasificacion-de-variables">3.5. Clasificación de Variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-y-transformaciones-variables-categoricas-object">3.6. Graficas y Transformaciones Variables Categóricas (Object)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-categoricas">3.6.1. Visualización de Variables Categóricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transformaciones-en-variables-categoricas">3.6.2. Transformaciones en Variables Categóricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-categoricas-modificadas">3.6.3. Visualización de Variables Categóricas Modificadas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">3.6.4 Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">3.6.5. Clasificación de Variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-y-transformaciones-de-variables-numericas-diferentes-a-dummies">3.7. Graficas y Transformaciones de Variables Numéricas Diferentes a Dummies</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-numericas">3.7.1. Visualización de Variables Numéricas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-valores-negativos">3.7.2. Eliminar valores negativos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#log-transformaciones-de-variables">3.7.3. Log-Transformaciones de Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#binarizar-variables">3.7.4. Binarizar Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#categorizar-variables">3.7.5. Categorizar Variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminar-outliers">3.7.6. Eliminar Outliers</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualizacion-de-variables-numericas-modificadas">3.7.7. Visualización de Variables Numéricas Modificadas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">3.7.8. Exploración Descriptiva de Variables Filtradas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">3.7.9. Clasificación de Variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#graficas-de-variables-dummies">3.8. Gráficas de Variables Dummies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploracion-descriptiva-de-variables-finales">3.9. Exploración Descriptiva de Variables Finales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-final">3.10. Guardar Base de Datos Final</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#estratificacion-aleatoria-de-la-base-de-datos">4.Estratificación aleatoria de la Base de datos</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cargar-base-de-datos-final">4.1. Cargar Base de Datos Final</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4.2. Exploración Descriptiva de Variables Finales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#separar-variables-de-acuerdo-a-su-clasificacion">4.3. Separar Variables de acuerdo a su Clasificación</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#estratificacion-50">4.4. Estratificación 50%</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guardar-base-de-datos-the-end">4.5. Guardar Base de Datos The End</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Angélica Sepúlveda, Andrés Pedraza y Jefry Llerena
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>